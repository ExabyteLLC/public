import{e as F,j as e,aB as S,aC as M,L,N as P,O as T,b as p,T as d,B as m,aD as E,t as b,n as N,i as k,al as y,ak as U,r as B,am as O,an as $,K as W,o as I,G as z,a as G,a6 as q,J,d as K,C as X,D as Y,S as H,a4 as Q,a5 as V}from"./index-D539SZr7.js";import{M as Z,F as ee,a as te,b as se}from"./index.esm-B5hRlkP8.js";import{A as ne,M as ae}from"./AppPriceText-DS8uu40R.js";const ie=({order:t,onCancel:s})=>{const{t:n,forDir:r}=F(),i=(()=>{switch(t.status){case"processing":return e.jsx(se,{style:{width:20,height:20}});case"canceled":return e.jsx(M,{style:{width:20,height:20}});case"shipping":return e.jsx(te,{style:{width:20,height:20}});case"arrived":return e.jsx(S,{sx:{width:20,height:20}});case"delivered":return e.jsx(ee,{style:{width:20,height:20}});case"returned":return e.jsx(Z,{style:{width:20,height:20}});default:return null}})(),a=(()=>{switch(t.status){case"processing":return"info.main";case"canceled":return"error.main";case"shipping":return"info.main";case"arrived":return"info.main";case"delivered":return"success.main";case"returned":return"error.main";default:return null}})(),c=(()=>{switch(t.status){case"processing":return"info5t.light";case"canceled":return"error5t.light";case"shipping":return"info5t.light";case"arrived":return"info5t.light";case"delivered":return"success5t.light";case"returned":return"error5t.light";default:return null}})();return e.jsxs(L,{variant:"outlined",sx:{position:"relative",width:"100%",height:"auto",bgcolor:"white.main",borderColor:"light.main",borderRadius:1},square:!0,children:[e.jsx(P,{component:T,to:`/order/${t==null?void 0:t.id}`,children:e.jsxs(p,{direction:"column",spacing:1,sx:{px:.75,py:1},children:[e.jsx(d,{variant:"h6",color:a,sx:{fontWeight:"bold"},children:e.jsxs(p,{direction:"row",gap:2,alignItems:"center",width:"max-content",children:[e.jsx(m,{sx:{display:"inline-flex",width:40,height:40,borderRadius:2,bgcolor:c,justifyContent:"center",alignItems:"center"},children:i}),e.jsxs(p,{direction:"column",alignItems:"start",width:"max-content",children:[n(t==null?void 0:t.status),e.jsx(d,{className:"ltr enFonts",variant:"caption",component:"span",color:"primary",sx:{textAlign:r("start","end")},children:new E(t==null?void 0:t.addstamp).readableDatetimeFormat})]})]})}),e.jsxs(p,{direction:"column",spacing:.5,sx:{px:1},children:[e.jsxs(m,{children:[e.jsx(d,{variant:"subtitle2",component:"span",children:n("order_no")+":"}),e.jsx(d,{variant:"h6",component:"span",sx:{fontWeight:"bold",px:1},children:t==null?void 0:t.id})]}),e.jsxs(m,{children:[e.jsx(d,{variant:"subtitle2",component:"span",children:n("address")+":"}),e.jsx(d,{variant:"h6",component:"span",sx:{fontWeight:"bold",px:1},children:t==null?void 0:t.address_name})]}),e.jsx(ne,{color:"secondary",price:t==null?void 0:t.total_amount,currency:n("currency")})]})]})}),(t==null?void 0:t.status)==="processing"&&e.jsx(ae,{bottom:4,end:4,children:e.jsx(b,{onClick:s,variant:"outlined",color:"error",startIcon:e.jsx(M,{}),children:n("cancel")})})]})},re=()=>({createMyDialog:C,createMyAlert:oe,createMyConfirm:ce,MyDialogWidget:_,MyDialogAction:le}),C=({maxWidth:t="xs",icon:s=e.jsx(y,{}),iconColor:n="secondary",content:r,actions:i=[]})=>{const a=N(!1),c=k(r),l=k(i),h=({content:o,actions:x})=>{o&&(c.value=o),x&&(l.value=x),a.value=!0},u=()=>a.value=!1;return{openDialog:h,closeDialog:u,dialogWidget:_({open:a.value,onClose:u,maxWidth:t,icon:s,iconColor:n,content:c.value,actions:l.value})}},oe=({maxWidth:t="xs",icon:s=e.jsx(y,{}),iconColor:n="secondary",content:r,action:i})=>C({maxWidth:t,icon:s,iconColor:n,content:r,actions:[i]}),ce=({maxWidth:t="xs",icon:s=e.jsx(y,{}),iconColor:n="secondary",content:r,yesAction:i,noAction:a})=>C({maxWidth:t,icon:s,iconColor:n,content:r,actions:[i,a]}),_=({open:t,onClose:s,maxWidth:n="xs",icon:r=e.jsx(y,{}),iconColor:i="secondary",content:a,actions:c=[]})=>e.jsxs(U,{open:t,onClose:s,fullWidth:!0,maxWidth:n,PaperProps:{sx:{overflow:"visible",overflowY:"visible"}},children:[e.jsx(m,{sx:{textAlign:"center",mt:-10},children:e.jsx(m,{sx:{bgcolor:"white.main",borderRadius:"100%",width:125,height:125,overflow:"hidden",mx:"auto"},children:B.cloneElement(r,{className:"animate-pulsate-fwd",sx:{width:"100%",height:"100%"},color:i})})}),e.jsx(O,{children:a,sx:{textAlign:"center"}}),e.jsx($,{children:e.jsx(W,{container:!0,spacing:1,children:I.toArray(c,(l,{linkTo:h,onClick:u,close:o,variant:x,color:g,startIcon:w,text:f,flex:v})=>(o&&(h=null,u=s),e.jsx(W,{item:!0,xs:v,children:e.jsx(b,{...h?{component:T,to:h}:{onClick:u},variant:x,color:g,startIcon:w,children:f,fullWidth:!0,sx:{px:.5}})},`dal-${l}`)))})})]}),le=({linkTo:t,onClick:s,close:n=!1,variant:r="outlined",color:i="secondary",startIcon:a,text:c,flex:l=6})=>({linkTo:t,onClick:s,close:n,variant:r,color:i,startIcon:a,text:c,flex:l}),xe=()=>{var D,A;const t=z(),{t:s,forDir:n}=F(),{device:r,forDevice:i}=G(),a=r==="mobile",{CID:c,isClient:l,orderCancelCall:h,orderCancelWaiting:u}=q(),o=J("public/ecommerce/clients/orders/get",{bodyData:{CID:c},autoCall:l}),{createMyDialog:x,MyDialogAction:g}=re(),{openDialog:w,closeDialog:f,dialogWidget:v}=x({iconColor:"error",content:s("cancel_order_confirm"),actions:[g({onClick:()=>{f()},text:s("yes"),color:"error"}),g({close:!0,text:s("no")})]});return B.useLayoutEffect(()=>{l||t(window.history.length>1?-1:"/",{replace:!0})},[l]),e.jsx(K,{main:!1,header:s("orders"),contentLoading:o.waiting||u,children:e.jsxs(X,{fixed:!a,maxWidth:a?"desktop":"laptop",sx:{my:i(2,null,4)},children:[!a&&e.jsx(Y,{textAlign:"left",sx:{overflow:"auto",width:"100%",mb:2},children:e.jsx(d,{color:"primary",children:s("orders")})}),o.waiting&&e.jsx(H,{variant:"rectangular",width:"100%",height:400}),!o.waiting&&((D=o.value)==null?void 0:D.length)===0&&e.jsx(m,{sx:{width:"100%",py:{mobile:10,tablet:30},bgcolor:"light.main"},children:e.jsxs(p,{spacing:i(2,null,4),alignItems:"center",children:[e.jsx(d,{variant:"h5",textAlign:"center",children:s("order_empty")}),e.jsx(b,{variant:"text",onClick:()=>{t(window.history.length>1?-1:"/")},color:"primary",startIcon:n(e.jsx(Q,{fontSize:"small"}),e.jsx(V,{fontSize:"small"})),children:s("back")})]})}),!o.waiting&&((A=o.value)==null?void 0:A.length)>0&&e.jsx(p,{spacing:1,children:I.toArray(o.value,(R,j)=>e.jsx(ie,{order:j,onCancel:()=>{w({content:s("cancel_order_confirm_id",{fillers:[j==null?void 0:j.id]}),actions:[g({close:!0,text:s("no")}),g({onClick:()=>{f(),h(j.id,()=>{o.recallApi()})},text:s("yes"),color:"error"})]})}},`ol-${R}`))}),v]})})};export{xe as default};
