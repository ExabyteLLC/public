import{a as V,e as j,j as e,b as I,o as E,Q as q,R as J,U as rn,V as sn,S as R,T as F,l as ln,B as K,W as tn,X as cn,Y as on,_ as dn,r as O,D as Q,$ as X,a0 as Y,A as Z,G as un,H as hn,n as W,u as vn,J as xn,d as gn,C as fn,q as pn,a1 as yn}from"./index-D72gc-Hc.js";import{A as Cn}from"./AppProductCardGrid-CJny0lVX.js";import{M as b,a as nn,c as an,b as en}from"./MyTabSlider-DBHubUXY.js";import"./MyGrid-DyOJg9hv.js";import"./AppProductFavBtn-DIWj7QFL.js";import"./AppPriceText-CRBV_3XZ.js";const _n=({waiting:o,products:y,page:S,pages:k,results:w,onPageChange:f,order:g,onOrderChange:x,category:h,clearCategory:C,brand:p,clearBrand:$,search:t,clearSearch:v})=>{const{forSize:a,forDevice:n}=V(),{t:c}=j(),s=(h||p||t)&&e.jsx(I,{direction:"row",justifyContent:n("center",null,"end"),alignItems:"center",sx:{width:"100%"},spacing:n(1,null,2),flexWrap:"wrap",children:E.toArray([{i:e.jsx(q,{}),n:h,c:C},{i:e.jsx(J,{}),n:p,c:$},{i:e.jsx(rn,{}),n:t,c:v}],(u,i)=>{if(i.n)return e.jsx(sn,{color:"secondary",size:"small",icon:i.i,label:i.n,variant:"outlined",onClick:i.c,onDelete:i.c},`fdc-${i.n}`)})});return o?e.jsxs(I,{direction:"column",spacing:1,children:[e.jsx(R,{variant:"rounded",height:25}),e.jsx(R,{variant:"rounded",height:1e3}),e.jsx(R,{variant:"rounded",height:50})]}):(y==null?void 0:y.length)>0?e.jsxs(I,{direction:"column",spacing:1,alignItems:"center",children:[e.jsxs(I,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{width:"100%"},spacing:n(1,null,2),children:[e.jsxs(I,{direction:"row",justifyContent:"start",alignItems:"center",sx:{width:"max-content"},spacing:.5,children:[e.jsx(F,{variant:"subtitle2",children:c("results")+":"}),e.jsx(F,{variant:"subtitle1",sx:{fontWeight:"bold"},children:ln.readable(parseFloat(w??0),0)})]}),e.jsx(K,{sx:{flexGrow:1},children:n(null,null,s)}),e.jsx(tn,{size:"small",variant:"standard",sx:{minWidth:120},children:e.jsx(cn,{value:g??"",onChange:u=>x(u.target.value),displayEmpty:!0,children:E.toArray([{v:"",n:e.jsx("em",{children:c("order")})},{v:"recent",n:c("recent")},{v:"featured",n:c("featured")},{v:"updated",n:c("updated")},{v:"name-asc",n:c("name_asc")},{v:"name-desc",n:c("name_desc")},{v:"price-asc",n:c("price_asc")},{v:"price-desc",n:c("price_desc")}],(u,i)=>e.jsx(on,{value:i.v,children:i.n},`os-${u}`))})})]}),n(s,null,""),e.jsx(Cn,{products:y}),e.jsx(dn,{variant:"outlined",shape:"rounded",color:"secondary",size:n("small",null,"medium","large"),siblingCount:a(2,3,4,5,6),boundaryCount:a(0,1,2),page:parseInt(S??1),count:parseInt(k??1),onChange:(u,i)=>f(i),showFirstButton:a(!1,!0),showLastButton:a(!1,!0)})]}):e.jsxs(I,{direction:"column",spacing:1,alignItems:"center",children:[s,e.jsx(K,{sx:{width:"100%",py:30,bgcolor:"light.main"},children:e.jsx(F,{variant:"h5",textAlign:"center",children:c("no_results_found")})})]})},wn=({categoryId:o,onChange:y,onLightChange:S,categories:k,brandId:w,brands:f})=>{var v;const{t:g,forLocale:x}=j(),{forDevice:h}=V(),C=O.useRef(null),p=h(36,42,48);var t=(()=>{var a=f==null?void 0:f.find(r=>(r==null?void 0:r.id)===w),n=k;a&&(n=n.filter(r=>a==null?void 0:a.categories.includes(r==null?void 0:r.id)));function c(r,_,B=[]){var A=_==null?void 0:_.find(D=>(D==null?void 0:D.id)===r);return A&&(c(A==null?void 0:A.parent_id,_,B),B.push(A)),B}var s=n==null?void 0:n.find(r=>(r==null?void 0:r.id)===o),u=E.arrCountIf(n,(r,_)=>(_==null?void 0:_.parent_id)===o),i=n==null?void 0:n.find(r=>(r==null?void 0:r.id)===(u>0?s==null?void 0:s.id:s==null?void 0:s.parent_id)),m=n==null?void 0:n.filter(r=>u>0?(r==null?void 0:r.parent_id)===o:(r==null?void 0:r.parent_id)===(s==null?void 0:s.parent_id)),d=0,U=m==null?void 0:m.findIndex(r=>(r==null?void 0:r.id)===o);U>-1&&(d=U+1);var G=[{id:null,name:g("categories"),name_alt:g("categories")},...c(s==null?void 0:s.id,n,[])],N=[{id:(s==null?void 0:s.parent_id)??null,name:g("all")+h("",(i&&` - ${i==null?void 0:i.name}`)??""),name_alt:g("all")+h("",(i&&` - ${i==null?void 0:i.name_alt}`)??""),icon:e.jsx(q,{color:"secondary",fontSize:h("small",null,"medium")})},...m??[]];return{v:d,k:(i==null?void 0:i.id)??null,bc:G,ts:N,arr:n}})();return t.arr?((v=t.arr)==null?void 0:v.length)>0?e.jsxs(I,{direction:"column",spacing:h(0,1),width:"100%",children:[e.jsx(Q,{textAlign:"left",sx:{overflow:"auto",width:"100%"},children:e.jsx(X,{maxItems:h(2,null,5),separator:"›",sx:{maxWidth:"100%",width:"max-content"},children:E.toArray(t.bc,(a,n)=>(n==null?void 0:n.id)!==o?e.jsx(Y,{underline:"hover",color:"secondary",onClick:()=>{S(n==null?void 0:n.id),C!=null&&C.current&&C.current.setValue(0),y(n==null?void 0:n.id)},sx:{cursor:"pointer"},children:n==null?void 0:n[x({ar:"name_alt"},"name")]},`${o}cbc-${a}`):e.jsx(F,{color:"primary",children:n==null?void 0:n[x({ar:"name_alt"},"name")]},`${o}cbc-${a}`))})}),e.jsx(b,{ref:C,value:t.v,data:t.ts,scrollButtons:h(!1,null,"auto"),customKey:a=>a==null?void 0:a.id,onChange:(a,n)=>y(n==null?void 0:n.id),iconPosition:"start",sx:a=>({borderColor:a?"secondary.main":"light.main",bgcolor:"light.main"}),label:(a,n)=>nn({variant:"body2",text:a==null?void 0:a[x({ar:"name_alt"},"name")],maxLines:null,px:1,color:n?"secondary.main":"primary.main"}),icon:(a,n)=>a.icon?an({icon:a.icon,width:p,height:p}):en({src:Z.getMedia(a==null?void 0:a.thumbnail),alt:a==null?void 0:a[x({ar:"name_alt"},"name")],width:p,height:p,objectFit:"contain"})},`mcs-${t.k}`)]}):null:e.jsx(R,{variant:"rounded",height:100})},$n=({brandId:o,onChange:y,brands:S,categoryId:k,categories:w})=>{var v;const{t:f,forLocale:g}=j(),{forDevice:x}=V(),h=O.useRef(null),C=x(72,76,82),p=x(26,32,38);var t=(()=>{var a=w==null?void 0:w.find(d=>(d==null?void 0:d.id)===k),n=S;a&&(n=n==null?void 0:n.filter(d=>a==null?void 0:a.brands.includes(d==null?void 0:d.id)));var c=n==null?void 0:n.find(d=>(d==null?void 0:d.id)===o),s=0,u=n==null?void 0:n.findIndex(d=>(d==null?void 0:d.id)===o);u>-1&&(s=u+1);var i=[{id:null,name:f("brands"),name_alt:f("brands")},...c?[c]:[]],m=[{id:null,name:f("all"),name_alt:f("all"),icon:e.jsx(J,{color:"secondary",fontSize:x("small",null,"medium")})},...n??[]];return{v:s,k:`brands-${s}`,bc:i,ts:m,arr:n}})();return t.arr?((v=t.arr)==null?void 0:v.length)>0?e.jsxs(I,{direction:"column",spacing:x(0,1),width:"100%",children:[e.jsx(Q,{textAlign:"left",sx:{overflow:"auto",width:"100%"},children:e.jsx(X,{separator:"›",sx:{maxWidth:"100%",width:"max-content"},children:E.toArray(t.bc,(a,n)=>(n==null?void 0:n.id)!==o?e.jsx(Y,{underline:"hover",color:"secondary",onClick:()=>{o=n==null?void 0:n.id,h!=null&&h.current&&h.current.setValue(0),y(n==null?void 0:n.id)},sx:{cursor:"pointer"},children:n==null?void 0:n[g({ar:"name_alt"},"name")]},`${o}cbc-${a}`):e.jsx(F,{color:"primary",children:n==null?void 0:n[g({ar:"name_alt"},"name")]},`${o}cbc-${a}`))})}),e.jsx(b,{ref:h,value:t.v,data:t.ts,scrollButtons:x(!1,null,"auto"),customKey:a=>a==null?void 0:a.id,onChange:(a,n)=>y(n==null?void 0:n.id),iconPosition:"start",sx:a=>({borderColor:a?"secondary.main":"light.main",bgcolor:"light.main"}),label:(a,n)=>nn({variant:"body2",text:a==null?void 0:a[g({ar:"name_alt"},"name")],maxLines:null,px:1,color:n?"secondary.main":"primary.main"}),icon:(a,n)=>a.icon?an({icon:a.icon,width:C,height:p}):en({src:Z.getMedia(a==null?void 0:a.thumbnail),alt:a==null?void 0:a[g({ar:"name_alt"},"name")],width:C,height:p,objectFit:"contain"})},`mbs-${t.k}`)]}):null:e.jsx(R,{variant:"rounded",height:90})},Bn=({type:o=null})=>{var m,d,U,G,N,r,_,B,A,D,H;const y=un(),{forLocale:S}=j(),{page:k,categoryId:w,brandId:f,search:g,order:x}=hn(),{forDevice:h,forSize:C}=V(),p=C(2,3,4,5,6)*4,$=W(k??1),t=W(parseInt(w)||null),v=W(parseInt(f)||null),a=W((g&&decodeURIComponent(g))??null),n=W((x&&decodeURIComponent(x))??null),c=vn(),s=xn("public/ecommerce/products/get",{bodyData:{thresh:p,page:$.value,...t.value?{category_id:t.value}:{},...v.value?{brand_id:v.value}:{},...a.value?{search:a.value}:{},...n.value?{order:n.value}:{}}}),u=({p:l=$.value,c:T=t.value,b:L=v.value,s:z=a.value,o:M=n.value}={})=>{s.callApi({thresh:p,page:l,...T?{category_id:T}:{},...L?{brand_id:L}:{},...z?{search:z}:{},...M?{order:M}:{}}),i({p:l,c:T,b:L,s:z,o:M})},i=({p:l=$.value,c:T=t.value,b:L=v.value,s:z=a.value,o:M=n.value}={})=>{let P="/products";o==="categories"&&(P+=`/categories/${w}`),o==="brands"&&(P+=`/brands/${f}`),l&&(P+=`/p/${l}`),o!=="categories"&&T&&(P+=`/c/${T}`),o!=="brands"&&L&&(P+=`/b/${L}`),z&&(P+=`/s/${encodeURIComponent(z)}`),M&&(P+=`/o/${encodeURIComponent(M)}`),y(P)};return e.jsx(gn,{search:a.value,onSearchChange:l=>{a.value=l,u({s:l})},children:e.jsxs(fn,{maxWidth:"desktop",sx:{my:h(2,null,4)},children:[e.jsxs(I,{spacing:h(1,null,2),children:[e.jsx(wn,{categoryId:t.value,onChange:l=>{t.value=l,u({c:l})},onLightChange:l=>{t.value=l},categories:(m=c.data)==null?void 0:m.categories,brandId:v.value,brands:(d=c.data)==null?void 0:d.brands}),e.jsx($n,{brandId:v.value,onChange:l=>{v.value=l,u({b:l})},brands:(U=c.data)==null?void 0:U.brands,categoryId:t.value,categories:(G=c.data)==null?void 0:G.categories}),e.jsx(_n,{waiting:s.waiting,products:(N=s.value)==null?void 0:N.products,page:$.value,pages:(r=s.value)==null?void 0:r.pages,results:(_=s.value)==null?void 0:_.results,onPageChange:l=>{$.value=l,u({p:l})},order:n.value,onOrderChange:l=>{n.value=l,u({o:l})},category:(A=(B=c.data)==null?void 0:B.categories.find(l=>l.id===t.value))==null?void 0:A[S({ar:"name_alt"},"name")],clearCategory:()=>{t.value=null,u({c:null})},brand:(H=(D=c.data)==null?void 0:D.brands.find(l=>l.id===v.value))==null?void 0:H[S({ar:"name_alt"},"name")],clearBrand:()=>{v.value=null,u({b:null})},search:a.value,clearSearch:()=>{a.value=null,u({s:null})}},s.namespace)]}),e.jsx(pn,{sx:{color:"primary",zIndex:l=>l.zIndex.drawer+1},open:s.waiting,children:e.jsx(yn,{color:"inherit"})})]})})};export{Bn as default};
