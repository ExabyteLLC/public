import{e as S,r as d,b as a,u as P,a as A,j as t,C as I,S as y,P as E,L,c as T,A as M,d as R,f as F,T as C,D as U,g as W,h as B,i as G,k,l as _,m as $,n as N}from"./index-DzB4AW6d.js";import{u as q,e as O,g as H,A as J,M as K,C as Q,a as V}from"./ChatLoading-D9AO8Imo.js";const X=()=>{const p=()=>{let e=window.innerWidth;return e>=a.sizes.xx?"xx":e>=a.sizes.xl?"xl":e>=a.sizes.lg?"lg":e>=a.sizes.md?"md":e>=a.sizes.sm?"sm":"xs"},l=S(p()),c=d.useCallback((e,s,r,n,o,i)=>{switch(l.value){case"xx":return i??o??n??r??s??e??null;case"xl":return o??n??r??s??e??null;case"lg":return n??r??s??e??null;case"md":return r??s??e??null;case"sm":return s??e??null;default:return e??null}},[l.value]),b=d.useCallback((e,s=!1)=>{var o,i;const r=(o=a.sizes)==null?void 0:o[e],n=(i=a.sizes)==null?void 0:i[l.value];return s?n<r:n<=r},[l.value]),f=d.useCallback((e,s=!1)=>{var o,i;const r=(o=a.sizes)==null?void 0:o[e],n=(i=a.sizes)==null?void 0:i[l.value];return s?n>r:n>=r},[l.value]),w=d.useCallback((e,s,r=!1)=>{var x,m,g;const n=(x=a.sizes)==null?void 0:x[e],o=(m=a.sizes)==null?void 0:m[s],i=(g=a.sizes)==null?void 0:g[l.value];return r?n<i&&i<o:n<=i&&i<=o},[l.value]),v=()=>{let e=window.innerWidth;return e>=a.devices.desktop?"desktop":e>=a.devices.laptop?"laptop":e>=a.devices.tablet?"tablet":"mobile"},u=S(v()),z=d.useCallback((e,s,r,n)=>{switch(u.value){case"desktop":return n??r??s??e??null;case"laptop":return r??s??e??null;case"tablet":return s??e??null;default:return e??null}},[u.value]),h=d.useCallback((e,s=!1)=>{var o,i;const r=(o=a.devices)==null?void 0:o[e],n=(i=a.devices)==null?void 0:i[u.value];return s?n<r:n<=r},[u.value]),j=d.useCallback((e,s=!1)=>{var o,i;const r=(o=a.devices)==null?void 0:o[e],n=(i=a.devices)==null?void 0:i[u.value];return s?n>r:n>=r},[u.value]),D=d.useCallback((e,s,r=!1)=>{var x,m,g;const n=(x=a.devices)==null?void 0:x[e],o=(m=a.devices)==null?void 0:m[s],i=(g=a.devices)==null?void 0:g[u.value];return r?n<i&&i<o:n<=i&&i<=o},[u.value]);return d.useEffect(()=>{function e(){let s=p();s!==l.value&&(l.value=s);let r=v();r!==u.value&&(u.value=r)}return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),{get sizeBreakpoints(){return a.sizes},get size(){return l.value},get forSize(){return c},get belowSize(){return b},get aboveSize(){return f},get betweenSizes(){return w},get deviceBreakpoints(){return a.devices},get device(){return u.value},get forDevice(){return z},get belowDevice(){return h},get aboveDevice(){return j},get betweenDevices(){return D}}},Y=X,Z=()=>{const{roomID:p}=P(),{status:l,room:c}=q(),{device:b}=Y(),f=b==="mobile",w=A(),v=O(J,"public/chat-person/add",!1);if(c&&l==="new")return t.jsx(I,{fixed:!f,maxWidth:"sm",disableGutters:!0,sx:{height:"100%"},children:t.jsx(y,{direction:"column",sx:{width:"100%",height:"100%"},justifyContent:"center",children:t.jsxs(E,{variant:"outlined",sx:{p:3},children:[t.jsxs(L,{sx:{px:0},children:[t.jsx(T,{sx:{width:65,height:65,minWidth:"unset"},children:t.jsx(M,{variant:"rounded",sx:{bgcolor:R.randomSeed(c.name,{lightness:30}).RGBA,width:65,height:65,"& img":{objectFit:"cover"}},src:H(c.icon),alt:c.name,children:c.name[0]})}),t.jsx(F,{primary:c.name,secondary:c.display_name,primaryTypographyProps:{variant:"h4"},secondaryTypographyProps:{variant:"h5"},sx:{px:2}})]}),c.description&&t.jsxs(t.Fragment,{children:[t.jsx(C,{variant:"body2",color:"dark300.main",children:"Description:"}),t.jsx(C,{variant:"body1",color:"dark.main",children:c.description})]}),t.jsx(U,{variant:"middle",sx:{my:2}}),c.deleted==="0"&&t.jsx("form",{onSubmit:W.eventPreventDefault(u=>{let z=B.formDataToObj(new FormData(u.target));v.call({bodyData:{room_id:c.id,name:z.name},onSuccess:({data:h})=>{w(`/q/chat/${encodeURIComponent(p)}/${encodeURIComponent(window.btoa(h.chat_person_id))}`,{replace:!0})},onError:({message:h,data:j})=>{alert(`error: ${h}`),console.log("e",h,j)}})}),children:t.jsxs(y,{direction:"column",sx:{width:"100%"},spacing:2,children:[t.jsx(C,{variant:"body1",color:"dark400.main",children:"Input your name and start chating away!"}),t.jsx(G,{name:"name",label:"name",variant:"outlined",size:"small"}),t.jsxs(y,{direction:"row",sx:{width:"100%"},spacing:1,children:[t.jsx(k,{type:"button",variant:"outlined",color:"error",disableElevation:!0,component:_,to:"/",sx:{flexGrow:1},loading:v.waiting,children:"Cancel"}),t.jsx(k,{type:"submit",variant:"contained",color:"primary",disableElevation:!0,sx:{flexGrow:1},loading:v.waiting,children:"Start Chating"})]})]})}),c.deleted==="1"&&t.jsx($,{severity:"warning",children:"Room no longer available!"})]})})})},se=()=>t.jsx(K,{children:t.jsx(ee,{})}),ee=()=>t.jsx(N,{body:t.jsxs(t.Fragment,{children:[t.jsx(Q,{}),t.jsx(Z,{}),t.jsx(V,{})]}),fixedPage:!0});export{se as default};
