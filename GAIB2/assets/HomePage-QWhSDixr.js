import{j as e,b as z,d as F,a as v,B as b,f as g,G as S,g as m,F as O,h as N,r as _,M as Y,Q as K,U as X,K as W,V as J,i as w,W as Z,X as Q,Y as ee,C as ne,n as A,D as f,o as P,R as L,p as M,q,s as H,u as re,v as te,w as se,x as G,y as ae,z as le,L as ie,E as oe,H as k}from"./index-q2RmvhOD.js";import{A as $,a as ce,b as ue,d as xe,h as E,C as pe,I as de,e as T,f as he,g as je}from"./AppForm-C9Y3teYU.js";import{P as me,S as ye,H as fe}from"./SafetyCheckTwoTone-Q1WSluK8.js";const B=({onSubmit:t,title:i,children:o,back:r=!1,onBack:c=()=>{},skip:n=!1,onSkip:a=()=>{},next:s=!1,finish:l=!1})=>e.jsx("form",{onSubmit:z.eventPreventDefault(({target:h})=>{let x=new FormData(h);t(x)}),style:{display:"contents"},children:e.jsxs(F,{direction:"column",spacing:2,justifyContent:"start",alignItems:"stretch",sx:{width:"100%",minHeight:"100%"},children:[e.jsx(ve,{title:i,children:o}),e.jsx("div",{style:{flexGrow:1}}),e.jsx(ge,{back:r,onBack:c,skip:n,onSkip:a,next:s,finish:l})]})}),ge=({back:t=!1,onBack:i=()=>{},skip:o=!1,onSkip:r=()=>{},next:c=!1,finish:n=!1})=>{const{t:a}=v();return e.jsxs(F,{direction:"row",spacing:2,children:[t&&e.jsx(b,{type:"button",variant:"outlined",color:"error",onClick:i,sx:{px:3},children:a("back")}),o&&e.jsx(b,{type:"button",variant:"contained",color:"primary",onClick:r,sx:{px:3},children:a("skip")}),e.jsx("div",{style:{flexGrow:1}}),c&&e.jsx(b,{type:"submit",variant:"outlined",color:"primary",sx:{px:3},children:a("next")}),n&&e.jsx(b,{type:"submit",variant:"contained",color:"primary",sx:{px:3},children:a("finish")})]})},ve=({title:t,children:i})=>e.jsxs(e.Fragment,{children:[e.jsx(g,{variant:"h4",color:"text.primary",children:t}),e.jsx("div",{style:{width:"100%"},children:e.jsx(S,{container:!0,spacing:2,justifyContent:"start",alignItems:"stretch",children:i})})]}),be=({activeStep:t,nextStep:i,prevStep:o,data:r,pushData:c,createLead:n})=>{const{t:a}=v();return e.jsxs(B,{onSubmit:s=>{let l=c(m.formDataToObj(s));n({name:l.name,phone:l.phone}),i()},title:a("main_person_data"),next:!0,children:[e.jsx($,{name:"name",label:a("fullname"),placeholder:a("fullname_hint"),startIcon:e.jsx(O,{}),required:!0,initValue:r==null?void 0:r.name}),e.jsx(ce,{name:"phone",label:a("phone_number"),placeholder:a("phone_number_hint"),startIcon:e.jsx(N,{}),required:!0,initValue:r==null?void 0:r.phone})]})},_e=({activeStep:t,nextStep:i,prevStep:o,data:r,pushData:c})=>{const{t:n}=v(),[a,s]=_.useState(null);return e.jsxs(B,{onSubmit:l=>{c(m.formDataToObj(l)),i()},back:!0,onBack:()=>{o()},next:!0,children:[e.jsx(g,{variant:"h4",gutterBottom:!0,children:n("main_person_data")}),e.jsx(ue,{name:"email",label:n("email"),placeholder:n("email_hint"),startIcon:e.jsx(Y,{}),required:!1,initValue:r==null?void 0:r.email}),e.jsx(xe,{name:"type",label:n("Type"),required:!0,startIcon:e.jsx(K,{}),options:[{value:"owner",label:n("Owner")},{value:"tenant",label:n("Tenant")}],initValue:r==null?void 0:r.type,onChange:l=>{s(l)}}),a=="owner"&&e.jsx(E,{name:"building_price",label:n("Builing price"),placeholder:n("Builing price"),startIcon:e.jsx(X,{}),required:!0,initValue:r==null?void 0:r.building_price}),a=="owner"&&e.jsx(E,{name:"content_price",label:n("Content price"),placeholder:n("Content price"),startIcon:e.jsx(W,{}),required:!0,initValue:r==null?void 0:r.content_price}),a=="tenant"&&e.jsx(E,{name:"tenant_price",label:n("Content price"),placeholder:n("Content price"),startIcon:e.jsx(W,{}),required:!0,initValue:r==null?void 0:r.tenant_price}),e.jsx($,{name:"address",label:n("Address"),placeholder:n("Address"),startIcon:e.jsx(J,{}),required:!0,initValue:r==null?void 0:r.address})]})},we=({activeStep:t,nextStep:i,prevStep:o,data:r,pushData:c,deps:n})=>{const{t:a,forLocale:s}=v();w(null);const l=_.useCallback(x=>n==null?void 0:n.plans_data.find(u=>u.id===x),[n]),h=_.useCallback(x=>{var u;return l(x)?m.sortArr((u=l(x))==null?void 0:u.plans_data_values,!1,d=>parseInt(d==null?void 0:d.order_by)):[]},[l]);return _.useCallback(x=>m.toArray(h(x),(u,d)=>({value:d.id,label:d==null?void 0:d[s({ar:"name_alt"},"name")]})),[s,h]),e.jsx(B,{onSubmit:x=>{c(m.formDataToObj(x)),i()},title:a("Home Data"),back:!0,onBack:()=>{o()},next:!0,children:m.toArray(h("homeBenefits"),(x,u)=>e.jsx(S,{item:!0,xs:6,md:4,children:e.jsx(Z,{children:e.jsx(Q,{control:e.jsx(ee,{name:"homeBenefits[]",value:u.id,...u.always_checked===1?{checked:!0}:{},sx:{"& .MuiSvgIcon-root":{fontSize:28}}}),label:u==null?void 0:u[s({ar:"name_alt"},"name")]})})},`cl-${u.id}`))})},Se=({item:t,onChoosePolicy:i})=>{const{t:o,forLocale:r}=v();return e.jsx(S,{item:!0,xs:12,lg:6,sx:{height:"auto"},children:e.jsx(ne,{sx:{height:"100%",boxShadow:3},children:e.jsxs(F,{direction:"column",sx:{height:"100%"},children:[e.jsxs(A,{sx:{borderColor:"primary.main",fontWeight:"bold"},children:[e.jsx(g,{variant:"h4",color:"primary",name:"plan",children:t==null?void 0:t[r({ar:"plan_name_alt"},"plan_name")]}),e.jsx(g,{variant:"h5",sx:{mt:2,fontWeight:"bold"},color:"secondary.main",name:"plan",children:e.jsx(R,{price:t==null?void 0:t.total,currency:o("egp_year")})})]}),e.jsx(f,{}),e.jsx(A,{sx:{borderColor:"primary.main",fontWeight:"bold",py:0},children:e.jsx(P,{sx:{width:"100%",padding:0},children:m.toArray(t==null?void 0:t.persons,(c,n)=>e.jsxs(L.Fragment,{children:[e.jsxs(M,{alignItems:"flex-start",dense:!0,children:[e.jsx(q,{children:e.jsx(me,{color:"secondary"})}),e.jsx(H,{primary:n==null?void 0:n.name,secondary:e.jsx(R,{price:n==null?void 0:n.amount,currency:o("egp_year")}),secondaryTypographyProps:{color:"secondary.main"}})]}),e.jsx(f,{variant:"inset",component:"li"})]},`persons-${c}`))})}),e.jsx(f,{}),e.jsxs(A,{sx:{borderColor:"primary.main",fontWeight:"bold",py:0},children:[e.jsx(g,{variant:"body1",color:"primaryT50.main",sx:{py:1},children:o("annual_limit")}),e.jsx(P,{sx:{width:"100%",padding:0},children:m.toArray(t==null?void 0:t.healthLimit,(c,n)=>e.jsxs(L.Fragment,{children:[e.jsxs(M,{alignItems:"flex-start",dense:!0,children:[e.jsx(q,{sx:{mt:0},children:e.jsx(ye,{color:"secondary"})}),e.jsx(H,{primary:n==null?void 0:n[r({ar:"name_alt"},"name")]})]}),e.jsx(f,{variant:"inset",component:"li"})]},`limit-${c}`))})]}),e.jsx(f,{}),e.jsx(A,{sx:{borderColor:"primary.main",fontWeight:"bold",py:0},children:e.jsxs(P,{sx:{width:"100%",padding:0},children:[e.jsx(g,{variant:"body1",color:"primaryT50.main",sx:{py:1},children:o("health_benefits")}),m.toArray(t==null?void 0:t.healthBenefits,(c,n)=>e.jsxs(L.Fragment,{children:[e.jsxs(M,{alignItems:"flex-start",dense:!0,children:[e.jsx(q,{children:e.jsx(fe,{color:"secondary"})}),e.jsx(H,{primary:n==null?void 0:n[r({ar:"name_alt"},"name")],secondary:n==null?void 0:n[r({ar:"desc_alt"},"desc")],secondaryTypographyProps:{color:"dark600.main"}})]}),e.jsx(f,{variant:"inset",component:"li"})]},`benefits-${c}`))]})}),e.jsx("div",{style:{flexGrow:1}}),e.jsx(f,{}),e.jsx(A,{children:e.jsxs(F,{direction:"row",spacing:2,children:[e.jsx("div",{style:{flexGrow:1}}),e.jsx(b,{type:"submit",variant:"outlined",color:"primary",sx:{px:3},onClick:()=>i(t),children:o("choose_policy")})]})})]})})})},R=({price:t,currency:i})=>e.jsxs(e.Fragment,{children:[t," ",e.jsx("span",{style:{fontSize:"0.7em"},children:i})]}),Ae=({activeStep:t,nextStep:i,prevStep:o,data:r,pushData:c,deps:n,healthReq:a,healthQQ:s})=>{var d,C,I,D,U;const{t:l}=v(),h=w(null),x=w(!1);_.useEffect(()=>{var p=new FormData;p.set("user_name",r.name),p.set("phone",r.phone),p.set("type",r.type),p.set("tenant_price",r.tenant_price),p.set("building_price",r.building_price),p.set("content_price",r.content_price);for(let j of r.homeBenefits)p.append("homeBenefits[]",j);s.call({bodyData:p,onSuccess:({message:j,data:y})=>{h.value=y==null?void 0:y.UID},onError:({message:j,data:y})=>{alert("Error:"+j),console.log(j,y)}})},[]);function u(p){var j=new FormData;j.set("UID",h.value),j.set("organization_id",p.org_id),j.set("plan_id",p.plan_id),j.set("data_type",p.data_type),a.call({bodyData:j,onSuccess:({message:y,data:V})=>{x.value=!0},onError:({message:y,data:V})=>{alert("Error:"+y),console.log(y,V)}})}return e.jsxs(B,{onSubmit:p=>{},title:l("list_of_home"),back:!0,onBack:()=>{o()},children:[((C=(d=s==null?void 0:s.value)==null?void 0:d.prices)==null?void 0:C.length)>0&&m.toArray(m.sortArr((I=s==null?void 0:s.value)==null?void 0:I.prices,!0,p=>{var j;return(j=p==null?void 0:p.healthBenefits)==null?void 0:j.length}),(p,j)=>e.jsx(Se,{item:j,onChoosePolicy:u},`giodfupjsk-${p}`)),((U=(D=s.value)==null?void 0:D.prices)==null?void 0:U.length)===0&&e.jsx(S,{item:!0,xs:12,children:e.jsx(g,{variant:"h5",color:"text.primary",textAlign:"center",sx:{width:"100%",py:10},children:l("empty_results")})}),e.jsx(re,{open:a.waiting||s.waiting,children:e.jsx(te,{color:"inherit"})}),e.jsx(Ce,{open:x.value,icon:e.jsx(pe,{}),content:l("request_success"),actions:[Ie({linkTo:"/",text:l("back"),flex:12})]})]})},Ce=({open:t,onClose:i,maxWidth:o="xs",icon:r=e.jsx(de,{}),iconColor:c="secondary",content:n,actions:a=[]})=>e.jsxs(se,{open:t,onClose:i,fullWidth:!0,maxWidth:o,PaperProps:{sx:{overflow:"visible",overflowY:"visible"}},children:[e.jsx(G,{sx:{textAlign:"center",mt:-10},children:e.jsx(G,{sx:{bgcolor:"white.main",borderRadius:"100%",width:125,height:125,overflow:"hidden",mx:"auto"},children:_.cloneElement(r,{className:"animate-pulsate-fwd",sx:{width:"100%",height:"100%"},color:c})})}),e.jsx(ae,{children:n,sx:{textAlign:"center"}}),e.jsx(le,{children:e.jsx(S,{container:!0,spacing:1,children:m.toArray(a,(s,{linkTo:l,onClick:h,close:x,variant:u,color:d,startIcon:C,text:I,flex:D})=>(x&&(l=null,h=i),e.jsx(S,{item:!0,xs:D,children:e.jsx(b,{...l?{component:ie,to:l}:{onClick:h},variant:u,color:d,startIcon:C,children:I,fullWidth:!0,sx:{px:.5}})},`dal-${s}`)))})})]}),Ie=({linkTo:t,onClick:i,close:o=!1,variant:r="outlined",color:c="secondary",startIcon:n,text:a,flex:s=6})=>({linkTo:t,onClick:i,close:o,variant:r,color:c,startIcon:n,text:a,flex:s});function Fe(){const{t}=v(),i=T(k,"client/home/dependants",!0),o=T(k,"client/home/quick-quotation2"),r=T(k,"client/home/request"),c=T(k,"client/home/lead"),n=w(!1),a={leadCreated:n.value,createLead:({name:u,phone:d})=>{n.value===!1&&(c.call({bodyData:{user_name:u,phone:d}}),n.value=!0)}},s=w(0),l={activeStep:s.value,nextStep:()=>s.value=s.value+1,prevStep:()=>s.value=s.value-1},h=w({}),x={data:h.value,pushData:u=>{const d={...h.value,...u};return h.value=d,d},setData:u=>h.value=u};return e.jsx(he,{title:t("Home Insurance"),icon:e.jsx(oe,{}),children:e.jsx(je,{active:s.value,contents:[e.jsx(be,{...l,...x,...a},"1"),e.jsx(_e,{...l,...x},"2"),e.jsx(we,{...l,...x,deps:i.value},"3"),e.jsx(Ae,{...l,...x,deps:i.value,healthReq:r,healthQQ:o},"4")]})})}export{Fe as default};
