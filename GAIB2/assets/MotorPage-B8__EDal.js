import{j as e,b as H,d as w,a as b,B as _,f as A,G as C,g as h,F as Y,h as T,M as U,k as G,I as L,J as O,K as W,N as E,r as M,P as Z,C as N,n as q,D as R,i as I,u as $,v as J,w as K,x as V,y as X,z as Q,L as ee,E as re,H as k}from"./index-q2RmvhOD.js";import{A as te,a as z,b as se,c as ne,d as S,C as oe,I as le,e as F,f as ie,g as ae}from"./AppForm-C9Y3teYU.js";const B=({onSubmit:l,title:a,children:x,back:r=!1,onBack:u=()=>{},skip:t=!1,onSkip:n=()=>{},next:i=!1,finish:c=!1})=>e.jsx("form",{onSubmit:H.eventPreventDefault(({target:m})=>{let d=new FormData(m);l(d)}),style:{display:"contents"},children:e.jsxs(w,{direction:"column",spacing:2,justifyContent:"start",alignItems:"stretch",sx:{width:"100%",minHeight:"100%"},children:[e.jsx(ue,{title:a,children:x}),e.jsx("div",{style:{flexGrow:1}}),e.jsx(ce,{back:r,onBack:u,skip:t,onSkip:n,next:i,finish:c})]})}),ce=({back:l=!1,onBack:a=()=>{},skip:x=!1,onSkip:r=()=>{},next:u=!1,finish:t=!1})=>{const{t:n}=b();return e.jsxs(w,{direction:"row",spacing:2,children:[l&&e.jsx(_,{type:"button",variant:"outlined",color:"error",onClick:a,sx:{px:3},children:n("back")}),x&&e.jsx(_,{type:"button",variant:"contained",color:"primary",onClick:r,sx:{px:3},children:n("skip")}),e.jsx("div",{style:{flexGrow:1}}),u&&e.jsx(_,{type:"submit",variant:"outlined",color:"primary",sx:{px:3},children:n("next")}),t&&e.jsx(_,{type:"submit",variant:"contained",color:"primary",sx:{px:3},children:n("finish")})]})},ue=({title:l,children:a})=>e.jsxs(e.Fragment,{children:[e.jsx(A,{variant:"h4",color:"text.primary",children:l}),e.jsx("div",{style:{width:"100%"},children:e.jsx(C,{container:!0,spacing:2,justifyContent:"start",alignItems:"stretch",children:a})})]}),xe=({activeStep:l,nextStep:a,prevStep:x,data:r,pushData:u})=>{const{t}=b();return e.jsxs(B,{onSubmit:n=>{u(h.formDataToObj(n)),a()},title:t("main_person_data"),next:!0,children:[e.jsx(te,{name:"name",label:t("fullname"),placeholder:t("fullname_hint"),startIcon:e.jsx(Y,{}),required:!0,initValue:r==null?void 0:r.name}),e.jsx(z,{name:"phone",label:t("phone_number"),placeholder:t("phone_number_hint"),startIcon:e.jsx(T,{}),required:!0,initValue:r==null?void 0:r.phone})]})},pe=({activeStep:l,nextStep:a,prevStep:x,data:r,pushData:u})=>{const{t}=b();return e.jsxs(B,{onSubmit:n=>{u(h.formDataToObj(n)),a()},back:!0,onBack:()=>{x()},next:!0,children:[e.jsx(A,{variant:"h4",gutterBottom:!0,children:t("main_person_data")}),e.jsx(se,{name:"email",label:t("email"),placeholder:t("email_hint"),startIcon:e.jsx(U,{}),required:!1,initValue:r==null?void 0:r.email}),e.jsx(ne,{style:{padding:"10px"},name:"birthdate",label:t("birthdate"),startIcon:e.jsx(G,{}),required:!0,initValue:r==null?void 0:r.birthdate}),e.jsx(S,{name:"gender",label:t("gender"),required:!0,startIcon:e.jsx(L,{}),options:[{value:"male",label:t("male")},{value:"female",label:t("female")}],initValue:r==null?void 0:r.gender}),e.jsx(S,{name:"is_licensed",label:t("licensed"),required:!0,startIcon:e.jsx(O,{}),options:[{value:"1",label:t("licensed")},{value:"0",label:t("Unlicensed")}],initValue:r==null?void 0:r.is_licensed}),e.jsx(z,{name:"price",label:t("Market Value"),placeholder:t("Market Value"),startIcon:e.jsx(W,{}),required:!0,type:"number",initValue:r==null?void 0:r.price})]})};function me(l){return E({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M204.24,60.23l-144,144a6,6,0,0,1-8.48-8.48l144-144a6,6,0,1,1,8.48,8.49ZM52,100A34,34,0,1,1,76,110,33.78,33.78,0,0,1,52,100Zm2-24a22,22,0,1,0,6.44-15.56A21.86,21.86,0,0,0,54,76ZM214,180A34,34,0,1,1,204,156,33.78,33.78,0,0,1,214,180Zm-12,0a21.87,21.87,0,0,0-6.44-15.56h0A22,22,0,1,0,202,180Z"},child:[]}]})(l)}function de(l){return E({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M960 95.888l-256.224.001V32.113c0-17.68-14.32-32-32-32s-32 14.32-32 32v63.76h-256v-63.76c0-17.68-14.32-32-32-32s-32 14.32-32 32v63.76H64c-35.344 0-64 28.656-64 64v800c0 35.343 28.656 64 64 64h896c35.344 0 64-28.657 64-64v-800c0-35.329-28.656-63.985-64-63.985zm0 863.985H64v-800h255.776v32.24c0 17.679 14.32 32 32 32s32-14.321 32-32v-32.224h256v32.24c0 17.68 14.32 32 32 32s32-14.32 32-32v-32.24H960v799.984zM736 511.888h64c17.664 0 32-14.336 32-32v-64c0-17.664-14.336-32-32-32h-64c-17.664 0-32 14.336-32 32v64c0 17.664 14.336 32 32 32zm0 255.984h64c17.664 0 32-14.32 32-32v-64c0-17.664-14.336-32-32-32h-64c-17.664 0-32 14.336-32 32v64c0 17.696 14.336 32 32 32zm-192-128h-64c-17.664 0-32 14.336-32 32v64c0 17.68 14.336 32 32 32h64c17.664 0 32-14.32 32-32v-64c0-17.648-14.336-32-32-32zm0-255.984h-64c-17.664 0-32 14.336-32 32v64c0 17.664 14.336 32 32 32h64c17.664 0 32-14.336 32-32v-64c0-17.68-14.336-32-32-32zm-256 0h-64c-17.664 0-32 14.336-32 32v64c0 17.664 14.336 32 32 32h64c17.664 0 32-14.336 32-32v-64c0-17.68-14.336-32-32-32zm0 255.984h-64c-17.664 0-32 14.336-32 32v64c0 17.68 14.336 32 32 32h64c17.664 0 32-14.32 32-32v-64c0-17.648-14.336-32-32-32z"},child:[]}]})(l)}const he=({activeStep:l,nextStep:a,prevStep:x,data:r,pushData:u,deps:t})=>{var y,v,j,f,g,D;const{t:n,forLocale:i}=b(),c=M.useCallback(s=>t==null?void 0:t.plans_data.find(o=>o.id===s),[t]),m=M.useCallback(s=>{var o;return c(s)?h.sortArr((o=c(s))==null?void 0:o.plans_data_values,!1,p=>parseInt(p==null?void 0:p.order_by)):[]},[c]),d=M.useCallback(s=>h.toArray(m(s),(o,p)=>({value:p.id,label:p==null?void 0:p[i({ar:"name_alt"},"name")]})),[i,m]);return e.jsxs(B,{onSubmit:s=>{u(h.formDataToObj(s)),a()},title:n("Car Data"),back:!0,onBack:()=>{x()},next:!0,children:[e.jsx(S,{name:(y=c("motorBrands"))==null?void 0:y.id,placeholder:n("Car Brands"),label:n("Car Brands"),required:!0,startIcon:e.jsx(Z,{}),initValue:r==null?void 0:r[(v=c("motorBrands"))==null?void 0:v.id],options:d("motorBrands")}),e.jsx(S,{name:(j=c("motorDeductibles"))==null?void 0:j.id,label:n("Motor Deductibles"),placeholder:n("Motor Deductibles"),required:!0,startIcon:e.jsx(me,{}),initValue:r==null?void 0:r[(f=c("motorDeductibles"))==null?void 0:f.id],options:d("motorDeductibles")}),e.jsx(S,{name:(g=c("motorManufactureYear"))==null?void 0:g.id,placeholder:n("Manufacture Year"),label:n("Manufacture Year"),required:!0,startIcon:e.jsx(de,{}),initValue:r==null?void 0:r[(D=c("motorManufactureYear"))==null?void 0:D.id],options:d("motorManufactureYear")})]})},ve=({item:l,onChoosePolicy:a})=>{const{t:x,forLocale:r}=b();return e.jsx(C,{item:!0,xs:12,lg:6,sx:{height:"auto"},children:e.jsx(N,{sx:{height:"100%",boxShadow:3},children:e.jsxs(w,{direction:"column",sx:{height:"100%"},children:[e.jsxs(q,{sx:{borderColor:"primary.main",fontWeight:"bold"},children:[e.jsx(A,{variant:"h4",color:"primary",name:"plan",children:l==null?void 0:l[r({ar:"plan_name_alt"},"plan_name")]}),e.jsx(A,{variant:"h5",sx:{mt:2,fontWeight:"bold"},color:"secondary.main",name:"plan",children:e.jsx(je,{price:l==null?void 0:l.total,currency:x("egp_year")})})]}),e.jsx("div",{style:{flexGrow:1}}),e.jsx(R,{}),e.jsx(q,{children:e.jsxs(w,{direction:"row",spacing:2,children:[e.jsx("div",{style:{flexGrow:1}}),e.jsx(_,{type:"submit",variant:"outlined",color:"primary",sx:{px:3},onClick:()=>a(l),children:x("choose_policy")})]})})]})})})},je=({price:l,currency:a})=>e.jsxs(e.Fragment,{children:[l," ",e.jsx("span",{style:{fontSize:"0.7em"},children:a})]}),fe=({activeStep:l,nextStep:a,prevStep:x,data:r,pushData:u,deps:t,healthReq:n,healthQQ:i})=>{var v,j,f,g,D;const{t:c}=b(),m=I(null),d=I(!1);M.useEffect(()=>{var s=new FormData;s.set("user_name",r.name),s.set("phone",r.phone),s.set("user_email",r.email),s.set("price",r.price),s.set("is_licensed",r.is_licensed),s.set("motorBrands",r.motorBrands),s.set("motorCoverage",r.motorCoverage),s.set("motorDeductibles",r.motorDeductibles),s.set("motorManufactureYear",r.motorManufactureYear),s.set("motorMaxAge",r.motorMaxAge),console.log(r),i.call({bodyData:s,onSuccess:({message:o,data:p})=>{m.value=p==null?void 0:p.UID,console.log(m.value)},onError:({message:o,data:p})=>{alert("Error:"+o),console.log(o,p)}})},[]),console.log(i==null?void 0:i.value);function y(s){var o=new FormData;o.set("UID",m.value),o.set("organization_id",s.org_id),o.set("plan_id",s.plan_id),o.set("data_type",s.data_type),o.set("name",r.name),o.set("phone",r.phone),o.set("email",r.email),o.set("price",r.price),o.set("is_licensed",r.is_licensed),o.set("motorBrands",r.motorBrands),o.set("motorCoverage",r.motorCoverage),o.set("motorDeductibles",r.motorDeductibles),o.set("motorManufactureYear",r.motorManufactureYear),o.set("motorMaxAge",r.motorMaxAge),n.call({bodyData:o,onSuccess:({message:p,data:P})=>{d.value=!0},onError:({message:p,data:P})=>{alert("Error:"+p),console.log(p,P)}})}return e.jsxs(B,{onSubmit:s=>{},title:c("list_of_health"),back:!0,onBack:()=>{x()},children:[((j=(v=i==null?void 0:i.value)==null?void 0:v.prices)==null?void 0:j.length)>0&&h.toArray(h.sortArr((f=i==null?void 0:i.value)==null?void 0:f.prices,!0,s=>{var o;return(o=s==null?void 0:s.healthBenefits)==null?void 0:o.length}),(s,o)=>e.jsx(ve,{item:o,onChoosePolicy:y},`giodfupjsk-${s}`)),((D=(g=i.value)==null?void 0:g.prices)==null?void 0:D.length)===0&&e.jsx(C,{item:!0,xs:12,children:e.jsx(A,{variant:"h5",color:"text.primary",textAlign:"center",sx:{width:"100%",py:10},children:c("empty_results")})}),e.jsx($,{open:n.waiting||i.waiting,children:e.jsx(J,{color:"inherit"})}),e.jsx(ge,{open:d.value,icon:e.jsx(oe,{}),content:c("request_success"),actions:[be({linkTo:"/",text:c("back"),flex:12})]})]})},ge=({open:l,onClose:a,maxWidth:x="xs",icon:r=e.jsx(le,{}),iconColor:u="secondary",content:t,actions:n=[]})=>e.jsxs(K,{open:l,onClose:a,fullWidth:!0,maxWidth:x,PaperProps:{sx:{overflow:"visible",overflowY:"visible"}},children:[e.jsx(V,{sx:{textAlign:"center",mt:-10},children:e.jsx(V,{sx:{bgcolor:"white.main",borderRadius:"100%",width:125,height:125,overflow:"hidden",mx:"auto"},children:M.cloneElement(r,{className:"animate-pulsate-fwd",sx:{width:"100%",height:"100%"},color:u})})}),e.jsx(X,{children:t,sx:{textAlign:"center"}}),e.jsx(Q,{children:e.jsx(C,{container:!0,spacing:1,children:h.toArray(n,(i,{linkTo:c,onClick:m,close:d,variant:y,color:v,startIcon:j,text:f,flex:g})=>(d&&(c=null,m=a),e.jsx(C,{item:!0,xs:g,children:e.jsx(_,{...c?{component:ee,to:c}:{onClick:m},variant:y,color:v,startIcon:j,children:f,fullWidth:!0,sx:{px:.5}})},`dal-${i}`)))})})]}),be=({linkTo:l,onClick:a,close:x=!1,variant:r="outlined",color:u="secondary",startIcon:t,text:n,flex:i=6})=>({linkTo:l,onClick:a,close:x,variant:r,color:u,startIcon:t,text:n,flex:i});function De(){const{t:l}=b(),a=F(k,"client/motor2/dependants",!0),x=F(k,"client/motor2/quick-quotation2"),r=F(k,"client/motor2/request"),u=I(0),t={activeStep:u.value,nextStep:()=>u.value=u.value+1,prevStep:()=>u.value=u.value-1},n=I({}),i={data:n.value,pushData:c=>{const m={...n.value,...c};return n.value=m,m},setData:c=>n.value=c};return e.jsx(ie,{title:l("Motor Insurance"),icon:e.jsx(re,{}),children:e.jsx(ae,{active:u.value,contents:[e.jsx(xe,{...t,...i},"1"),e.jsx(pe,{...t,...i},"2"),e.jsx(he,{...t,...i,deps:a.value},"3"),e.jsx(fe,{...t,...i,deps:a.value,healthReq:r,healthQQ:x},"4")]})})}export{De as default};
