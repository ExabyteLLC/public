import{j as e,b as N,d as T,a as w,B as I,f as D,G as B,g as f,F as J,h as K,M as X,k as Q,I as ee,P as ne,Q as re,U as R,i as C,r as M,V as te,p as ae,q as A,D as _,s as q,R as H,t as z,u as U,v as E,w as L,x as se,y as le,z as ie,E as Z,H as oe,J as ce,L as pe,K as ue,N as P}from"./index-BWEcqMhN.js";import{A as de,a as Y,b as he,c as xe,d as k,e as F,f as me,g as je}from"./AppForm-BsNa3M_s.js";import{P as ve,S as fe,H as ge,C as ye,I as be}from"./SafetyCheckTwoTone-7KSkY5rD.js";const V=({onSubmit:a,title:o,children:c,back:n=!1,onBack:p=()=>{},skip:r=!1,onSkip:s=()=>{},next:l=!1,finish:u=!1})=>e.jsx("form",{onSubmit:N.eventPreventDefault(({target:d})=>{let x=new FormData(d);a(x)}),style:{display:"contents"},children:e.jsxs(T,{direction:"column",spacing:2,justifyContent:"start",alignItems:"stretch",sx:{width:"100%",minHeight:"100%"},children:[e.jsx(De,{title:o,children:c}),e.jsx("div",{style:{flexGrow:1}}),e.jsx(_e,{back:n,onBack:p,skip:r,onSkip:s,next:l,finish:u})]})}),_e=({back:a=!1,onBack:o=()=>{},skip:c=!1,onSkip:n=()=>{},next:p=!1,finish:r=!1})=>{const{t:s}=w();return e.jsxs(T,{direction:"row",spacing:2,children:[a&&e.jsx(I,{type:"button",variant:"outlined",color:"error",onClick:o,sx:{px:3},children:s("back")}),c&&e.jsx(I,{type:"button",variant:"contained",color:"primary",onClick:n,sx:{px:3},children:s("skip")}),e.jsx("div",{style:{flexGrow:1}}),p&&e.jsx(I,{type:"submit",variant:"outlined",color:"primary",sx:{px:3},children:s("next")}),r&&e.jsx(I,{type:"submit",variant:"contained",color:"primary",sx:{px:3},children:s("finish")})]})},De=({title:a,children:o})=>e.jsxs(e.Fragment,{children:[e.jsx(D,{variant:"h4",color:"text.primary",children:a}),e.jsx("div",{style:{width:"100%"},children:e.jsx(B,{container:!0,spacing:2,justifyContent:"start",alignItems:"stretch",children:o})})]}),we=({activeStep:a,nextStep:o,prevStep:c,data:n,pushData:p,createLead:r})=>{const{t:s}=w();return e.jsxs(V,{onSubmit:l=>{let u=p(f.formDataToObj(l));r({name:u.name,phone:u.phone}),o()},title:s("main_person_data"),next:!0,children:[e.jsx(de,{name:"name",label:s("fullname"),placeholder:s("fullname_hint"),startIcon:e.jsx(J,{}),required:!0,initValue:n==null?void 0:n.name}),e.jsx(Y,{name:"phone",label:s("phone_number"),placeholder:s("phone_number_hint"),startIcon:e.jsx(K,{}),required:!0,initValue:n==null?void 0:n.phone})]})},Ie=({activeStep:a,nextStep:o,prevStep:c,data:n,pushData:p})=>{const{t:r}=w();return e.jsxs(V,{onSubmit:s=>{p(f.formDataToObj(s)),o()},back:!0,onBack:()=>{c()},next:!0,children:[e.jsx(D,{variant:"h4",gutterBottom:!0,children:r("main_person_data")}),e.jsx(he,{name:"email",label:r("email"),placeholder:r("email_hint"),startIcon:e.jsx(X,{}),required:!1,initValue:n==null?void 0:n.email}),e.jsx(xe,{style:{padding:"10px"},name:"birthdate",label:r("birthdate"),startIcon:e.jsx(Q,{}),required:!0,initValue:n==null?void 0:n.birthdate}),e.jsx(k,{name:"gender",label:r("gender"),required:!0,startIcon:e.jsx(ee,{}),options:[{value:"male",label:r("male")},{value:"female",label:r("female")}],initValue:n==null?void 0:n.gender}),e.jsx(k,{name:"Licenced",label:r("Licenced"),required:!0,startIcon:e.jsx(ne,{}),options:[{value:"Licenced",label:r("Licenced")},{value:"Unlicenced",label:r("Unlicenced")}],initValue:n==null?void 0:n.Licenced}),e.jsx(Y,{name:"Market Value",label:r("Market Value"),placeholder:r("Market Value"),startIcon:e.jsx(re,{}),required:!0,type:"number",initValue:n==null?void 0:n["Market Value"]})]})};function Ce(a){return R({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M204.24,60.23l-144,144a6,6,0,0,1-8.48-8.48l144-144a6,6,0,1,1,8.48,8.49ZM52,100A34,34,0,1,1,76,110,33.78,33.78,0,0,1,52,100Zm2-24a22,22,0,1,0,6.44-15.56A21.86,21.86,0,0,0,54,76ZM214,180A34,34,0,1,1,204,156,33.78,33.78,0,0,1,214,180Zm-12,0a21.87,21.87,0,0,0-6.44-15.56h0A22,22,0,1,0,202,180Z"},child:[]}]})(a)}function Se(a){return R({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M960 95.888l-256.224.001V32.113c0-17.68-14.32-32-32-32s-32 14.32-32 32v63.76h-256v-63.76c0-17.68-14.32-32-32-32s-32 14.32-32 32v63.76H64c-35.344 0-64 28.656-64 64v800c0 35.343 28.656 64 64 64h896c35.344 0 64-28.657 64-64v-800c0-35.329-28.656-63.985-64-63.985zm0 863.985H64v-800h255.776v32.24c0 17.679 14.32 32 32 32s32-14.321 32-32v-32.224h256v32.24c0 17.68 14.32 32 32 32s32-14.32 32-32v-32.24H960v799.984zM736 511.888h64c17.664 0 32-14.336 32-32v-64c0-17.664-14.336-32-32-32h-64c-17.664 0-32 14.336-32 32v64c0 17.664 14.336 32 32 32zm0 255.984h64c17.664 0 32-14.32 32-32v-64c0-17.664-14.336-32-32-32h-64c-17.664 0-32 14.336-32 32v64c0 17.696 14.336 32 32 32zm-192-128h-64c-17.664 0-32 14.336-32 32v64c0 17.68 14.336 32 32 32h64c17.664 0 32-14.32 32-32v-64c0-17.648-14.336-32-32-32zm0-255.984h-64c-17.664 0-32 14.336-32 32v64c0 17.664 14.336 32 32 32h64c17.664 0 32-14.336 32-32v-64c0-17.68-14.336-32-32-32zm-256 0h-64c-17.664 0-32 14.336-32 32v64c0 17.664 14.336 32 32 32h64c17.664 0 32-14.336 32-32v-64c0-17.68-14.336-32-32-32zm0 255.984h-64c-17.664 0-32 14.336-32 32v64c0 17.68 14.336 32 32 32h64c17.664 0 32-14.32 32-32v-64c0-17.648-14.336-32-32-32z"},child:[]}]})(a)}const Ae=({activeStep:a,nextStep:o,prevStep:c,data:n,pushData:p,deps:r})=>{var j,g,y,b,S,i;const{t:s,forLocale:l}=w(),u=C(null);console.log(r);const d=M.useCallback(t=>r==null?void 0:r.plans_data.find(h=>h.id===t),[r]),x=M.useCallback(t=>{var h;return d(t)?f.sortArr((h=d(t))==null?void 0:h.plans_data_values,!1,v=>parseInt(v==null?void 0:v.order_by)):[]},[d]),m=M.useCallback(t=>f.toArray(x(t),(h,v)=>({value:v.id,label:v==null?void 0:v[l({ar:"name_alt"},"name")]})),[l,x]);return e.jsxs(V,{onSubmit:t=>{p(f.formDataToObj(t)),o()},title:s("Car Data"),back:!0,onBack:()=>{c()},next:!0,children:[e.jsx(k,{name:(j=d())==null?void 0:j.id,placeholder:s("Car Brands"),label:s("Car Brands"),required:!0,startIcon:e.jsx(te,{}),initValue:n==null?void 0:n[(g=d())==null?void 0:g.id],options:m("motorBrands"),onChange:t=>{u.value=t}}),e.jsx(k,{name:(y=d())==null?void 0:y.id,label:s("Motor Deductibles"),placeholder:s("Motor Deductibles"),required:!0,startIcon:e.jsx(Ce,{}),initValue:n==null?void 0:n[(b=d())==null?void 0:b.id],options:m("motorDeductibles"),onChange:t=>{u.value=t}}),e.jsx(k,{name:(S=d())==null?void 0:S.id,placeholder:s("Manufacture Year"),label:s("Manufacture Year"),required:!0,startIcon:e.jsx(Se,{}),initValue:n==null?void 0:n[(i=d())==null?void 0:i.id],options:m("motorManufactureYear"),onChange:t=>{u.value=t}})]})},Me=({item:a,onChoosePolicy:o})=>{const{t:c,forLocale:n}=w();return e.jsx(B,{item:!0,xs:12,lg:6,sx:{height:"auto"},children:e.jsx(ae,{sx:{height:"100%",boxShadow:3},children:e.jsxs(T,{direction:"column",sx:{height:"100%"},children:[e.jsxs(A,{sx:{borderColor:"primary.main",fontWeight:"bold"},children:[e.jsx(D,{variant:"h4",color:"primary",name:"plan",children:a==null?void 0:a[n({ar:"plan_name_alt"},"plan_name")]}),e.jsx(D,{variant:"h5",sx:{mt:2,fontWeight:"bold"},color:"secondary.main",name:"plan",children:e.jsx($,{price:a==null?void 0:a.total,currency:c("egp_year")})})]}),e.jsx(_,{}),e.jsx(A,{sx:{borderColor:"primary.main",fontWeight:"bold",py:0},children:e.jsx(q,{sx:{width:"100%",padding:0},children:f.toArray(a==null?void 0:a.persons,(p,r)=>e.jsxs(H.Fragment,{children:[e.jsxs(z,{alignItems:"flex-start",dense:!0,children:[e.jsx(U,{children:e.jsx(ve,{color:"secondary"})}),e.jsx(E,{primary:r==null?void 0:r.name,secondary:e.jsx($,{price:r==null?void 0:r.amount,currency:c("egp_year")}),secondaryTypographyProps:{color:"secondary.main"}})]}),e.jsx(_,{variant:"inset",component:"li"})]},`persons-${p}`))})}),e.jsx(_,{}),e.jsxs(A,{sx:{borderColor:"primary.main",fontWeight:"bold",py:0},children:[e.jsx(D,{variant:"body1",color:"primaryT50.main",sx:{py:1},children:c("annual_limit")}),e.jsx(q,{sx:{width:"100%",padding:0},children:f.toArray(a==null?void 0:a.healthLimit,(p,r)=>e.jsxs(H.Fragment,{children:[e.jsxs(z,{alignItems:"flex-start",dense:!0,children:[e.jsx(U,{sx:{mt:0},children:e.jsx(fe,{color:"secondary"})}),e.jsx(E,{primary:r==null?void 0:r[n({ar:"name_alt"},"name")]})]}),e.jsx(_,{variant:"inset",component:"li"})]},`limit-${p}`))})]}),e.jsx(_,{}),e.jsx(A,{sx:{borderColor:"primary.main",fontWeight:"bold",py:0},children:e.jsxs(q,{sx:{width:"100%",padding:0},children:[e.jsx(D,{variant:"body1",color:"primaryT50.main",sx:{py:1},children:c("health_benefits")}),f.toArray(a==null?void 0:a.healthBenefits,(p,r)=>e.jsxs(H.Fragment,{children:[e.jsxs(z,{alignItems:"flex-start",dense:!0,children:[e.jsx(U,{children:e.jsx(ge,{color:"secondary"})}),e.jsx(E,{primary:r==null?void 0:r[n({ar:"name_alt"},"name")],secondary:r==null?void 0:r[n({ar:"desc_alt"},"desc")],secondaryTypographyProps:{color:"dark600.main"}})]}),e.jsx(_,{variant:"inset",component:"li"})]},`benefits-${p}`))]})}),e.jsx("div",{style:{flexGrow:1}}),e.jsx(_,{}),e.jsx(A,{children:e.jsxs(T,{direction:"row",spacing:2,children:[e.jsx("div",{style:{flexGrow:1}}),e.jsx(I,{type:"submit",variant:"outlined",color:"primary",sx:{px:3},onClick:()=>o(a),children:c("choose_policy")})]})})]})})})},$=({price:a,currency:o})=>e.jsxs(e.Fragment,{children:[a," ",e.jsx("span",{style:{fontSize:"0.7em"},children:o})]}),ke=({activeStep:a,nextStep:o,prevStep:c,data:n,pushData:p,deps:r,healthReq:s,healthQQ:l})=>{var j,g,y,b,S;const{t:u}=w(),d=C(null),x=C(!1);M.useEffect(()=>{var i=new FormData;if(i.set("user_name",n.name),i.set("phone",n.phone),i.append("name[]",n.name),i.append("age[]",L.parseDate(n.birthdate,"dmy").age),n.person_name)for(let t in n.person_name)i.append("name[]",n.person_name[t]),i.append("age[]",L.parseDate(n.person_birthdate[t],"dmy").age);i.set("healthLimit",n.healthLimit);for(let t in n.healthBenefits)i.append("healthBenefits[]",n.healthBenefits[t]);l.call({bodyData:i,onSuccess:({message:t,data:h})=>{d.value=h==null?void 0:h.UID}})},[]);function m(i){var v,W;var t=new FormData;if(t.set("UID",d.value),t.set("organization_id",i.org_id),t.set("plan_id",i.plan_id),t.set("data_type",i.data_type),t.append("name[]",n.name),t.append("age[]",L.parseDate(n.birthdate,"dmy").age),t.append("gender[]",n.gender),t.append("relation[]","self"),t.append("price[]",(v=i.persons)==null?void 0:v[0].amount),n.person_name)for(var h in n.person_name)h=parseInt(h),t.append("name[]",n.person_name[h]),t.append("age[]",L.parseDate(n.person_birthdate[h],"dmy").age),t.append("gender[]",n.person_gender[h]),t.append("relation[]",n.person_relation[h]),t.append("price[]",(W=i.persons)==null?void 0:W[h+1].amount);s.call({bodyData:t,onSuccess:({message:G,data:O})=>{x.value=!0},onError:({message:G,data:O})=>{console.log(G,O)}})}return e.jsxs(V,{onSubmit:i=>{},title:u("list_of_health"),back:!0,onBack:()=>{c()},children:[((g=(j=l==null?void 0:l.value)==null?void 0:j.prices)==null?void 0:g.length)>0&&f.toArray(f.sortArr((y=l==null?void 0:l.value)==null?void 0:y.prices,!0,i=>{var t;return(t=i==null?void 0:i.healthBenefits)==null?void 0:t.length}),(i,t)=>e.jsx(Me,{item:t,onChoosePolicy:m},`giodfupjsk-${i}`)),((S=(b=l.value)==null?void 0:b.prices)==null?void 0:S.length)===0&&e.jsx(B,{item:!0,xs:12,children:e.jsx(D,{variant:"h5",color:"text.primary",textAlign:"center",sx:{width:"100%",py:10},children:u("empty_health_results")})}),e.jsx(se,{open:s.waiting||l.waiting,children:e.jsx(le,{color:"inherit"})}),e.jsx(Be,{open:x.value,icon:e.jsx(ye,{}),content:u("health_request_success"),actions:[Le({onClick:()=>window.location.href="../",text:u("back"),flex:12})]})]})},Be=({open:a,onClose:o,maxWidth:c="xs",icon:n=e.jsx(be,{}),iconColor:p="secondary",content:r,actions:s=[]})=>e.jsxs(ie,{open:a,onClose:o,fullWidth:!0,maxWidth:c,PaperProps:{sx:{overflow:"visible",overflowY:"visible"}},children:[e.jsx(Z,{sx:{textAlign:"center",mt:-10},children:e.jsx(Z,{sx:{bgcolor:"white.main",borderRadius:"100%",width:125,height:125,overflow:"hidden",mx:"auto"},children:M.cloneElement(n,{className:"animate-pulsate-fwd",sx:{width:"100%",height:"100%"},color:p})})}),e.jsx(oe,{children:r,sx:{textAlign:"center"}}),e.jsx(ce,{children:e.jsx(B,{container:!0,spacing:1,children:f.toArray(s,(l,{linkTo:u,onClick:d,close:x,variant:m,color:j,startIcon:g,text:y,flex:b})=>(x&&(u=null,d=o),e.jsx(B,{item:!0,xs:b,children:e.jsx(I,{...u?{component:pe,to:u}:{onClick:d},variant:m,color:j,startIcon:g,children:y,fullWidth:!0,sx:{px:.5}})},`dal-${l}`)))})})]}),Le=({linkTo:a,onClick:o,close:c=!1,variant:n="outlined",color:p="secondary",startIcon:r,text:s,flex:l=6})=>({linkTo:a,onClick:o,close:c,variant:n,color:p,startIcon:r,text:s,flex:l});function Ve(){const{t:a}=w(),o=F(P,"client/motor2/dependants",{autoCall:!0}),c=F(P,"client/health/quick-quotation2"),n=F(P,"client/health/request"),p=F(P,"client/health/lead"),r=C(!1),s={leadCreated:r.value,createLead:({name:m,phone:j})=>{r.value===!1&&(p.call({bodyData:{user_name:m,phone:j}}),r.value=!0)}},l=C(0),u={activeStep:l.value,nextStep:()=>l.value=l.value+1,prevStep:()=>l.value=l.value-1},d=C({}),x={data:d.value,pushData:m=>{const j={...d.value,...m};return d.value=j,j},setData:m=>d.value=m};return e.jsx(me,{title:a("Motor Insurance"),icon:e.jsx(ue,{}),children:e.jsx(je,{active:l.value,contents:[e.jsx(we,{...u,...x,...s},"1"),e.jsx(Ie,{...u,...x},"2"),e.jsx(Ae,{...u,...x,deps:o.value},"3"),e.jsx(ke,{...u,...x,deps:o.value,healthReq:n,healthQQ:c},"4")]})})}export{Ve as default};
