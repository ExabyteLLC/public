import{e as W,j as e,H as B,J as L,L as S,b as p,T as d,B as m,ax as T,q as b,f as F,g as _,ah as v,ag as E,r as k,ai as P,aj as U,G as I,t as z,z as N,a as q,a5 as G,F as O,d as H,C as J,D as X,S as Y,a3 as K,a4 as Q}from"./index-Buom24Y1.js";import{d as V,B as Z,a as ee,T as te,C as M,L as se}from"./CartXMarkIcon-Dx690ypG.js";import{A as ne,M as ae}from"./AppPriceText-DtSo9EzN.js";const ie=({order:t,onCancel:s})=>{const{t:n,forDir:r}=W(),i=(()=>{switch(t.status){case"processing":return e.jsx(se,{size:20});case"canceled":return e.jsx(M,{size:20});case"shipping":return e.jsx(te,{size:20});case"arrived":return e.jsx(ee,{sx:{width:20,height:20}});case"delivered":return e.jsx(Z,{size:20});case"returned":return e.jsx(V,{style:{width:20,height:20}});default:return null}})(),a=(()=>{switch(t.status){case"processing":return"info.main";case"canceled":return"error.main";case"shipping":return"info.main";case"arrived":return"info.main";case"delivered":return"success.main";case"returned":return"error.main";default:return null}})(),o=(()=>{switch(t.status){case"processing":return"info5t.light";case"canceled":return"error5t.light";case"shipping":return"info5t.light";case"arrived":return"info5t.light";case"delivered":return"success5t.light";case"returned":return"error5t.light";default:return null}})();return e.jsxs(B,{variant:"outlined",sx:{position:"relative",width:"100%",height:"auto",bgcolor:"white.main",borderColor:"light.main",borderRadius:1},square:!0,children:[e.jsx(L,{component:S,to:`/order/${t==null?void 0:t.id}`,children:e.jsxs(p,{direction:"column",spacing:1,sx:{px:.75,py:1},children:[e.jsx(d,{variant:"h6",color:a,sx:{fontWeight:"bold"},children:e.jsxs(p,{direction:"row",gap:2,alignItems:"center",width:"max-content",children:[e.jsx(m,{sx:{display:"inline-flex",width:40,height:40,borderRadius:2,bgcolor:o,justifyContent:"center",alignItems:"center"},children:i}),e.jsxs(p,{direction:"column",alignItems:"start",width:"max-content",children:[n(t==null?void 0:t.status),e.jsx(d,{className:"ltr enFonts",variant:"caption",component:"span",color:"primary",sx:{textAlign:r("start","end")},children:new T(t==null?void 0:t.addstamp).readableDatetimeFormat})]})]})}),e.jsxs(p,{direction:"column",spacing:.5,sx:{px:1},children:[e.jsxs(m,{children:[e.jsx(d,{variant:"subtitle2",component:"span",children:n("order_no")+":"}),e.jsx(d,{variant:"h6",component:"span",sx:{fontWeight:"bold",px:1},children:t==null?void 0:t.id})]}),e.jsxs(m,{children:[e.jsx(d,{variant:"subtitle2",component:"span",children:n("address")+":"}),e.jsx(d,{variant:"h6",component:"span",sx:{fontWeight:"bold",px:1},children:t==null?void 0:t.address_name})]}),e.jsx(ne,{color:"secondary",price:t==null?void 0:t.total_amount,currency:n("currency")})]})]})}),(t==null?void 0:t.status)==="processing"&&e.jsx(ae,{bottom:4,end:4,children:e.jsx(b,{onClick:s,variant:"outlined",color:"error",startIcon:e.jsx(M,{}),children:n("cancel")})})]})},re=()=>({createMyDialog:C,createMyAlert:ce,createMyConfirm:oe,MyDialogWidget:R,MyDialogAction:le}),C=({maxWidth:t="xs",icon:s=e.jsx(v,{}),iconColor:n="secondary",content:r,actions:i=[]})=>{const a=F(!1),o=_(r),l=_(i),u=({content:c,actions:h})=>{c&&(o.value=c),h&&(l.value=h),a.value=!0},x=()=>a.value=!1;return{openDialog:u,closeDialog:x,dialogWidget:R({open:a.value,onClose:x,maxWidth:t,icon:s,iconColor:n,content:o.value,actions:l.value})}},ce=({maxWidth:t="xs",icon:s=e.jsx(v,{}),iconColor:n="secondary",content:r,action:i})=>C({maxWidth:t,icon:s,iconColor:n,content:r,actions:[i]}),oe=({maxWidth:t="xs",icon:s=e.jsx(v,{}),iconColor:n="secondary",content:r,yesAction:i,noAction:a})=>C({maxWidth:t,icon:s,iconColor:n,content:r,actions:[i,a]}),R=({open:t,onClose:s,maxWidth:n="xs",icon:r=e.jsx(v,{}),iconColor:i="secondary",content:a,actions:o=[]})=>e.jsxs(E,{open:t,onClose:s,fullWidth:!0,maxWidth:n,PaperProps:{sx:{overflow:"visible",overflowY:"visible"}},children:[e.jsx(m,{sx:{textAlign:"center",mt:-10},children:e.jsx(m,{sx:{bgcolor:"white.main",borderRadius:"100%",width:125,height:125,overflow:"hidden",mx:"auto"},children:k.cloneElement(r,{className:"animate-pulsate-fwd",sx:{width:"100%",height:"100%"},color:i})})}),e.jsx(P,{sx:{textAlign:"center"},children:a}),e.jsx(U,{children:e.jsx(I,{container:!0,spacing:1,children:z(o,(l,{linkTo:u,onClick:x,close:c,variant:h,color:g,startIcon:y,text:j,flex:w})=>(c&&(u=null,x=s),e.jsx(I,{item:!0,xs:w,children:e.jsx(b,{...u?{component:S,to:u}:{onClick:x},variant:h,color:g,startIcon:y,fullWidth:!0,sx:{px:.5},children:j})},`dal-${l}`)))})})]}),le=({linkTo:t,onClick:s,close:n=!1,variant:r="outlined",color:i="secondary",startIcon:a,text:o,flex:l=6})=>({linkTo:t,onClick:s,close:n,variant:r,color:i,startIcon:a,text:o,flex:l}),he=()=>{var D,A;const t=N(),{t:s,forDir:n}=W(),{device:r,forDevice:i}=q(),a=r==="mobile",{CID:o,isClient:l,orderCancelCall:u,orderCancelWaiting:x}=G(),c=O("public/ecommerce/clients/orders/get",{bodyData:{CID:o},autoCall:l}),{createMyDialog:h,MyDialogAction:g}=re(),{openDialog:y,closeDialog:j,dialogWidget:w}=h({iconColor:"error",content:s("cancel_order_confirm"),actions:[g({onClick:()=>{j()},text:s("yes"),color:"error"}),g({close:!0,text:s("no")})]});return k.useLayoutEffect(()=>{l||t(window.history.length>1?-1:"/",{replace:!0})},[l]),e.jsx(H,{main:!1,header:s("orders"),contentLoading:c.waiting||x,children:e.jsxs(J,{fixed:!a,maxWidth:a?"desktop":"laptop",sx:{my:i(2,null,4)},children:[!a&&e.jsx(X,{textAlign:"left",sx:{overflow:"auto",width:"100%",mb:2},children:e.jsx(d,{color:"primary",children:s("orders")})}),c.waiting&&e.jsx(Y,{variant:"rectangular",width:"100%",height:400}),!c.waiting&&((D=c.value)==null?void 0:D.length)===0&&e.jsx(m,{sx:{width:"100%",py:{mobile:10,tablet:30},bgcolor:"light.main"},children:e.jsxs(p,{spacing:i(2,null,4),alignItems:"center",children:[e.jsx(d,{variant:"h5",textAlign:"center",children:s("order_empty")}),e.jsx(b,{variant:"text",onClick:()=>{t(window.history.length>1?-1:"/")},color:"primary",startIcon:n(e.jsx(K,{fontSize:"small"}),e.jsx(Q,{fontSize:"small"})),children:s("back")})]})}),!c.waiting&&((A=c.value)==null?void 0:A.length)>0&&e.jsx(p,{spacing:1,children:z(c.value,($,f)=>e.jsx(ie,{order:f,onCancel:()=>{y({content:s("cancel_order_confirm_id",{fillers:[f==null?void 0:f.id]}),actions:[g({close:!0,text:s("no")}),g({onClick:()=>{j(),u(f.id,()=>{c.recallApi()})},text:s("yes"),color:"error"})]})}},`ol-${$}`))}),w]})})};export{he as default};
