import{k as A,l as M,j as e,H as z,J as W,b as r,ak as D,T as o,z as O,e as F,a as B,a5 as G,ae as U,a6 as J,r as N,D as l,ad as K,m as Q,d as X,C as Y,al as Z,am as ee,an as C,t as k,ao as te,S as ie,ap as re}from"./index-Buom24Y1.js";import{A as T}from"./AppPriceText-DtSo9EzN.js";import{A as oe}from"./AppProductCardGrid-D05VSnbi.js";import"./MyGrid-fM1tLbk6.js";import"./AppProductFavBtn-D4WczCjm.js";var m={},ne=M;Object.defineProperty(m,"__esModule",{value:!0});var R=m.default=void 0,ae=ne(A()),p=e;R=m.default=(0,ae.default)([(0,p.jsx)("path",{d:"M17 6H3v8h14zm-7 7c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3",opacity:".3"},"0"),(0,p.jsx)("path",{d:"M17 4H3c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2M3 14V6h14v8z"},"1"),(0,p.jsx)("path",{d:"M10 7c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3m13 0v11c0 1.1-.9 2-2 2H4v-2h17V7z"},"2")],"PaymentsTwoTone");var j={},se=M;Object.defineProperty(j,"__esModule",{value:!0});var H=j.default=void 0,ce=se(A()),x=e;H=j.default=(0,ce.default)([(0,x.jsx)("path",{d:"M19 19c0 .55-.45 1-1 1s-1-.45-1-1v-3H8V5h11z",opacity:".3"},"0"),(0,x.jsx)("path",{d:"M19.5 3.5 18 2l-1.5 1.5L15 2l-1.5 1.5L12 2l-1.5 1.5L9 2 7.5 3.5 6 2v14H3v3c0 1.66 1.34 3 3 3h12c1.66 0 3-1.34 3-3V2zM19 19c0 .55-.45 1-1 1s-1-.45-1-1v-3H8V5h11z"},"1"),(0,x.jsx)("path",{d:"M9 7h6v2H9zm7 0h2v2h-2zm-7 3h6v2H9zm7 0h2v2h-2z"},"2")],"ReceiptLongTwoTone");const le=({address:t,radio:i=!1,checked:s=!1})=>e.jsx(z,{variant:"outlined",sx:{position:"relative",width:"100%",height:"auto",bgcolor:"white.main",borderColor:"light.main"},square:!0,children:e.jsx(W,{children:e.jsxs(r,{direction:"column",spacing:.5,sx:{px:.75,py:1},children:[e.jsxs(r,{direction:"row",spacing:.5,alignItems:"center",children:[i&&e.jsx(D,{value:t==null?void 0:t.id,checked:s,size:"small",color:"secondary",sx:{p:.5}}),e.jsx(o,{variant:"h6",color:"primary",sx:{fontWeight:"bold",display:"-webkit-box",overflow:"hidden",WebkitBoxOrient:"vertical",WebkitLineClamp:2},children:t==null?void 0:t.name})]}),e.jsx(r,{direction:"row",spacing:.5,children:e.jsx(o,{variant:"subtitle2",color:"primary",children:t==null?void 0:t.telephone1})}),e.jsx(o,{variant:"subtitle1",color:"primary",children:t==null?void 0:t.address1})]})})}),de=({value:t,title:i,content:s,checked:d=!1})=>e.jsx(z,{variant:"outlined",sx:{position:"relative",width:"100%",height:"auto",bgcolor:"white.main",borderColor:"light.main"},square:!0,children:e.jsx(W,{children:e.jsxs(r,{direction:"column",spacing:.5,sx:{px:.75,py:1},children:[e.jsxs(r,{direction:"row",spacing:.5,alignItems:"center",children:[e.jsx(D,{value:t,checked:d,size:"small",color:"secondary",sx:{p:.5}}),e.jsx(o,{variant:"h6",color:"primary",sx:{fontWeight:"bold",display:"-webkit-box",overflow:"hidden",WebkitBoxOrient:"vertical",WebkitLineClamp:2},children:i})]}),s]})})}),je=()=>{var w;const t=O(),{t:i}=F(),{device:s,forDevice:d}=B(),c=s==="mobile",{isClient:v,addresses:S,addressesWaiting:g,checkoutCall:L,checkoutWaiting:P}=G(),I=U(),{cart:$,cartProducts:V,cartValue:q,cartReset:E}=J(),y=Object.keys($).length===0,h=q(),f=h;N.useLayoutEffect(()=>{(y||!v)&&t(window.history.length>1?-1:"/",{replace:!0})},[y,v]);const b=e.jsxs(r,{direction:"column",spacing:1,width:"100%",py:1,children:[e.jsxs(r,{direction:"column",spacing:.5,children:[f!==h&&e.jsxs(e.Fragment,{children:[e.jsxs(r,{direction:"row",width:"100%",justifyContent:"space-between",children:[e.jsx(o,{children:i("subtotal")}),e.jsx(T,{color:"secondary",price:h,currency:i("currency")})]}),e.jsx(l,{})]}),e.jsxs(r,{direction:"row",width:"100%",justifyContent:"space-between",children:[e.jsx(o,{sx:{fontWeight:"bold"},children:i("total")}),e.jsx(T,{color:"secondary",price:f,currency:i("currency")})]})]}),e.jsx(K,{loading:P,variant:"contained",color:"secondary",type:"submit",startIcon:e.jsx(H,{}),children:i("complete_order")})]});return e.jsx("form",{onSubmit:Q.eventPreventDefault((a,n)=>{let _=new FormData(n);L(_.get("payment_method_id"),_.get("address_id"),()=>{t("/orders",{replace:!0}),E()})}),children:e.jsx(X,{main:!1,header:i("complete_order"),mobileFooter:b,mobileFooterHeight:150,children:e.jsxs(Y,{fixed:!c,maxWidth:c?"desktop":"laptop",sx:{my:d(2,null,4)},children:[!c&&e.jsx(l,{textAlign:"center",sx:{overflow:"auto",width:"100%",mb:2},children:e.jsx(o,{variant:"h6",color:"primary",children:i("checkout")})}),e.jsxs(r,{direction:"column",spacing:3,children:[e.jsx(Z,{severity:"info",color:"warning",children:e.jsx(ee,{children:i("shipping_not_included")})}),e.jsxs(r,{direction:"column",spacing:1,children:[e.jsx(u,{title:i("payment_method"),icon:e.jsx(R,{})}),e.jsx(C,{component:r,spacing:1,name:"payment_method_id",children:k((w=I.data)==null?void 0:w.payments,(a,n)=>e.jsx(de,{value:n.id,title:i(n.id),checked:a==="0"},`cpl-${a}`))})]}),e.jsxs(r,{direction:"column",spacing:1,children:[e.jsx(u,{title:i("address"),icon:e.jsx(te,{})}),g&&e.jsx(ie,{variant:"rectangular",width:"100%",height:125}),!g&&e.jsx(C,{component:r,spacing:1,name:"address_id",children:k(S,(a,n)=>e.jsx(le,{addressId:n.id,address:n,radio:!0,checked:a==="0"},`cal-${a}`))})]}),e.jsxs(r,{direction:"column",spacing:1,children:[e.jsx(u,{title:i("cart"),icon:e.jsx(re,{})}),e.jsx(oe,{products:V,inCheckout:!0})]}),!c&&e.jsxs(r,{direction:"column",spacing:1,children:[e.jsx(l,{}),b]})]})]})})})},u=({title:t,icon:i})=>e.jsx(l,{textAlign:"left",sx:{overflow:"auto",width:"100%",mb:2},children:e.jsxs(r,{direction:"row",width:"max-content",spacing:1,alignItems:"center",children:[i,e.jsx(o,{color:"primary",sx:{fontWeight:"bold"},children:t})]})});export{je as default};
