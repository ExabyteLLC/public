import{a as V,e as j,j as e,b as P,t as K,K as rn,N as H,O as Q,Q as sn,S as W,T as R,B as O,R as ln,U as tn,V as cn,W as dn,X as on,Y as un,r as X,D as Y,_ as q,$ as J,A as Z,z as hn,E as vn,f as F,u as xn,F as fn,d as gn,C as pn,p as _n,a0 as yn}from"./index-Buom24Y1.js";import{A as Cn}from"./AppProductCardGrid-D05VSnbi.js";import{e as wn}from"./AppPriceText-DtSo9EzN.js";import{M as b,a as nn,c as an,b as en}from"./MyTabSlider-Chbujg4M.js";import"./MyGrid-fM1tLbk6.js";import"./AppProductFavBtn-D4WczCjm.js";const $n=({waiting:c,products:x,page:C,pages:$,results:_,onPageChange:f,order:p,onOrderChange:g,category:h,clearCategory:w,brand:y,clearBrand:I,search:t,clearSearch:v})=>{const{forSize:a,forDevice:n}=V(),{t:d}=j(),s=(h||y||t)&&e.jsx(P,{direction:"row",justifyContent:n("center",null,"end"),alignItems:"center",sx:{width:"100%"},spacing:n(1,null,2),flexWrap:"wrap",children:K([{i:e.jsx(H,{}),n:h,c:w},{i:e.jsx(Q,{}),n:y,c:I},{i:e.jsx(sn,{}),n:t,c:v}],(u,i)=>{if(i.n)return e.jsx(rn,{color:"secondary",size:"small",icon:i.i,label:i.n,variant:"outlined",onClick:i.c,onDelete:i.c},`fdc-${i.n}`)})});return c?e.jsxs(P,{direction:"column",spacing:1,children:[e.jsx(W,{variant:"rounded",height:25}),e.jsx(W,{variant:"rounded",height:1e3}),e.jsx(W,{variant:"rounded",height:50})]}):(x==null?void 0:x.length)>0?e.jsxs(P,{direction:"column",spacing:1,alignItems:"center",children:[e.jsxs(P,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{width:"100%"},spacing:n(1,null,2),children:[e.jsxs(P,{direction:"row",justifyContent:"start",alignItems:"center",sx:{width:"max-content"},spacing:.5,children:[e.jsx(R,{variant:"subtitle2",children:d("results")+":"}),e.jsx(R,{variant:"subtitle1",sx:{fontWeight:"bold"},children:wn.readable(parseFloat(_??0),0)})]}),e.jsx(O,{sx:{flexGrow:1},children:n(null,null,s)}),e.jsx(ln,{size:"small",variant:"standard",sx:{minWidth:120},children:e.jsx(tn,{value:p??"",onChange:u=>g(u.target.value),displayEmpty:!0,children:K([{v:"",n:e.jsx("em",{children:d("order")})},{v:"recent",n:d("recent")},{v:"featured",n:d("featured")},{v:"updated",n:d("updated")},{v:"name-asc",n:d("name_asc")},{v:"name-desc",n:d("name_desc")},{v:"price-asc",n:d("price_asc")},{v:"price-desc",n:d("price_desc")}],(u,i)=>e.jsx(cn,{value:i.v,children:i.n},`os-${u}`))})})]}),n(s,null,""),e.jsx(Cn,{products:x}),e.jsx(dn,{variant:"outlined",shape:"rounded",color:"secondary",size:n("small",null,"medium","large"),siblingCount:a(2,3,4,5,6),boundaryCount:a(0,1,2),page:parseInt(C??1),count:parseInt($??1),onChange:(u,i)=>f(i),showFirstButton:a(!1,!0),showLastButton:a(!1,!0)})]}):e.jsxs(P,{direction:"column",spacing:1,alignItems:"center",children:[s,e.jsx(O,{sx:{width:"100%",py:30,bgcolor:"light.main"},children:e.jsx(R,{variant:"h5",textAlign:"center",children:d("no_results_found")})})]})};function mn(c,x=(C,$)=>null){var _;try{if(!on(c)||!un(x))return 0;var C=0;for(var $ in c)x($,c[$])&&C++;return C}catch(f){console.trace((_=this==null?void 0:this.constructor)==null?void 0:_.name,f);return}}const In=({categoryId:c,onChange:x,onLightChange:C,categories:$,brandId:_,brands:f})=>{var v;const{t:p,forLocale:g}=j(),{forDevice:h}=V(),w=X.useRef(null),y=h(36,42,48);var t=(()=>{var a=f==null?void 0:f.find(r=>(r==null?void 0:r.id)===_),n=$;a&&(n=n.filter(r=>a==null?void 0:a.categories.includes(r==null?void 0:r.id)));function d(r,m,k=[]){var A=m==null?void 0:m.find(B=>(B==null?void 0:B.id)===r);return A&&(d(A==null?void 0:A.parent_id,m,k),k.push(A)),k}var s=n==null?void 0:n.find(r=>(r==null?void 0:r.id)===c),u=mn(n,(r,m)=>(m==null?void 0:m.parent_id)===c),i=n==null?void 0:n.find(r=>(r==null?void 0:r.id)===(u>0?s==null?void 0:s.id:s==null?void 0:s.parent_id)),S=n==null?void 0:n.filter(r=>u>0?(r==null?void 0:r.parent_id)===c:(r==null?void 0:r.parent_id)===(s==null?void 0:s.parent_id)),o=0,U=S==null?void 0:S.findIndex(r=>(r==null?void 0:r.id)===c);U>-1&&(o=U+1);var E=[{id:null,name:p("categories"),name_alt:p("categories")},...d(s==null?void 0:s.id,n,[])],N=[{id:(s==null?void 0:s.parent_id)??null,name:p("all")+h("",(i&&` - ${i==null?void 0:i.name}`)??""),name_alt:p("all")+h("",(i&&` - ${i==null?void 0:i.name_alt}`)??""),icon:e.jsx(H,{color:"secondary",fontSize:h("small",null,"medium")})},...S??[]];return{v:o,k:(i==null?void 0:i.id)??null,bc:E,ts:N,arr:n}})();return t.arr?((v=t.arr)==null?void 0:v.length)>0?e.jsxs(P,{direction:"column",spacing:h(0,1),width:"100%",children:[e.jsx(Y,{textAlign:"left",sx:{overflow:"auto",width:"100%"},children:e.jsx(q,{maxItems:h(2,null,5),separator:"›",sx:{maxWidth:"100%",width:"max-content"},children:K(t.bc,(a,n)=>(n==null?void 0:n.id)!==c?e.jsx(J,{underline:"hover",color:"secondary",onClick:()=>{C(n==null?void 0:n.id),w!=null&&w.current&&w.current.setValue(0),x(n==null?void 0:n.id)},sx:{cursor:"pointer"},children:n==null?void 0:n[g({ar:"name_alt"},"name")]},`${c}cbc-${a}`):e.jsx(R,{color:"primary",children:n==null?void 0:n[g({ar:"name_alt"},"name")]},`${c}cbc-${a}`))})}),e.jsx(b,{ref:w,value:t.v,data:t.ts,scrollButtons:h(!1,null,"auto"),customKey:a=>a==null?void 0:a.id,onChange:(a,n)=>x(n==null?void 0:n.id),iconPosition:"start",sx:a=>({borderColor:a?"secondary.main":"light.main",bgcolor:"light.main"}),label:(a,n)=>nn({variant:"body2",text:a==null?void 0:a[g({ar:"name_alt"},"name")],maxLines:null,px:1,color:n?"secondary.main":"primary.main"}),icon:a=>a.icon?an({icon:a.icon,width:y,height:y}):en({src:Z.getMedia(a==null?void 0:a.thumbnail),alt:a==null?void 0:a[g({ar:"name_alt"},"name")],width:y,height:y,objectFit:"contain"})},`mcs-${t.k}`)]}):null:e.jsx(W,{variant:"rounded",height:100})},Sn=({brandId:c,onChange:x,brands:C,categoryId:$,categories:_})=>{var v;const{t:f,forLocale:p}=j(),{forDevice:g}=V(),h=X.useRef(null),w=g(72,76,82),y=g(26,32,38);var t=(()=>{var a=_==null?void 0:_.find(o=>(o==null?void 0:o.id)===$),n=C;a&&(n=n==null?void 0:n.filter(o=>a==null?void 0:a.brands.includes(o==null?void 0:o.id)));var d=n==null?void 0:n.find(o=>(o==null?void 0:o.id)===c),s=0,u=n==null?void 0:n.findIndex(o=>(o==null?void 0:o.id)===c);u>-1&&(s=u+1);var i=[{id:null,name:f("brands"),name_alt:f("brands")},...d?[d]:[]],S=[{id:null,name:f("all"),name_alt:f("all"),icon:e.jsx(Q,{color:"secondary",fontSize:g("small",null,"medium")})},...n??[]];return{v:s,k:`brands-${s}`,bc:i,ts:S,arr:n}})();return t.arr?((v=t.arr)==null?void 0:v.length)>0?e.jsxs(P,{direction:"column",spacing:g(0,1),width:"100%",children:[e.jsx(Y,{textAlign:"left",sx:{overflow:"auto",width:"100%"},children:e.jsx(q,{separator:"›",sx:{maxWidth:"100%",width:"max-content"},children:K(t.bc,(a,n)=>(n==null?void 0:n.id)!==c?e.jsx(J,{underline:"hover",color:"secondary",onClick:()=>{c=n==null?void 0:n.id,h!=null&&h.current&&h.current.setValue(0),x(n==null?void 0:n.id)},sx:{cursor:"pointer"},children:n==null?void 0:n[p({ar:"name_alt"},"name")]},`${c}cbc-${a}`):e.jsx(R,{color:"primary",children:n==null?void 0:n[p({ar:"name_alt"},"name")]},`${c}cbc-${a}`))})}),e.jsx(b,{ref:h,value:t.v,data:t.ts,scrollButtons:g(!1,null,"auto"),customKey:a=>a==null?void 0:a.id,onChange:(a,n)=>x(n==null?void 0:n.id),iconPosition:"start",sx:a=>({borderColor:a?"secondary.main":"light.main",bgcolor:"light.main"}),label:(a,n)=>nn({variant:"body2",text:a==null?void 0:a[p({ar:"name_alt"},"name")],maxLines:null,px:1,color:n?"secondary.main":"primary.main"}),icon:a=>a.icon?an({icon:a.icon,width:w,height:y}):en({src:Z.getMedia(a==null?void 0:a.thumbnail),alt:a==null?void 0:a[p({ar:"name_alt"},"name")],width:w,height:y,objectFit:"contain"})},`mbs-${t.k}`)]}):null:e.jsx(W,{variant:"rounded",height:90})},Ln=({type:c=null})=>{var S,o,U,E,N,r,m,k,A,B,G;const x=hn(),{forLocale:C}=j(),{page:$,categoryId:_,brandId:f,search:p,order:g}=vn(),{forDevice:h,forSize:w}=V(),y=w(2,3,4,5,6)*4,I=F($??1),t=F(parseInt(_)||null),v=F(parseInt(f)||null),a=F((p&&decodeURIComponent(p))??null),n=F((g&&decodeURIComponent(g))??null),d=xn(),s=fn("public/ecommerce/products/get",{bodyData:{thresh:y,page:I.value,...t.value?{category_id:t.value}:{},...v.value?{brand_id:v.value}:{},...a.value?{search:a.value}:{},...n.value?{order:n.value}:{}}}),u=({p:l=I.value,c:z=t.value,b:L=v.value,s:M=a.value,o:T=n.value}={})=>{s.callApi({thresh:y,page:l,...z?{category_id:z}:{},...L?{brand_id:L}:{},...M?{search:M}:{},...T?{order:T}:{}}),i({p:l,c:z,b:L,s:M,o:T})},i=({p:l=I.value,c:z=t.value,b:L=v.value,s:M=a.value,o:T=n.value}={})=>{let D="/products";c==="categories"&&(D+=`/categories/${_}`),c==="brands"&&(D+=`/brands/${f}`),l&&(D+=`/p/${l}`),c!=="categories"&&z&&(D+=`/c/${z}`),c!=="brands"&&L&&(D+=`/b/${L}`),M&&(D+=`/s/${encodeURIComponent(M)}`),T&&(D+=`/o/${encodeURIComponent(T)}`),x(D)};return e.jsx(gn,{search:a.value,onSearchChange:l=>{a.value=l,u({s:l})},children:e.jsxs(pn,{maxWidth:"desktop",sx:{my:h(2,null,4)},children:[e.jsxs(P,{spacing:h(1,null,2),children:[e.jsx(In,{categoryId:t.value,onChange:l=>{t.value=l,u({c:l})},onLightChange:l=>{t.value=l},categories:(S=d.data)==null?void 0:S.categories,brandId:v.value,brands:(o=d.data)==null?void 0:o.brands}),e.jsx(Sn,{brandId:v.value,onChange:l=>{v.value=l,u({b:l})},brands:(U=d.data)==null?void 0:U.brands,categoryId:t.value,categories:(E=d.data)==null?void 0:E.categories}),e.jsx($n,{waiting:s.waiting,products:(N=s.value)==null?void 0:N.products,page:I.value,pages:(r=s.value)==null?void 0:r.pages,results:(m=s.value)==null?void 0:m.results,onPageChange:l=>{I.value=l,u({p:l})},order:n.value,onOrderChange:l=>{n.value=l,u({o:l})},category:(A=(k=d.data)==null?void 0:k.categories.find(l=>l.id===t.value))==null?void 0:A[C({ar:"name_alt"},"name")],clearCategory:()=>{t.value=null,u({c:null})},brand:(G=(B=d.data)==null?void 0:B.brands.find(l=>l.id===v.value))==null?void 0:G[C({ar:"name_alt"},"name")],clearBrand:()=>{v.value=null,u({b:null})},search:a.value,clearSearch:()=>{a.value=null,u({s:null})}},s.namespace)]}),e.jsx(_n,{sx:{color:"primary",zIndex:l=>l.zIndex.drawer+1},open:s.waiting,children:e.jsx(yn,{color:"inherit"})})]})})};export{Ln as default};
